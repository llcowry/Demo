!function($){if(Function.prototype.lxlExtend=function(t,e){if("function"!=typeof t)return this;this.base=t.prototype,this.base.constructor=t;var i=function(){};i.prototype=t.prototype,this.prototype=new i,this.prototype.constructor=this,e&&$.extend(this.prototype,e)},Function.prototype.lxlDefer=function(t,e,i){var n=this;return setTimeout(function(){n.apply(t,i||[])},e)},window.lxl=$.lxlui={version:"v1.1.0",managerCount:0,managers:{},managerIdPrev:"lxlui",autoNewId:!0,error:{managerIsExist:"管理器id已经存在"},pluginPrev:"lxl",getId:function(t){t=t||this.managerIdPrev;var e=t+(1e3+this.managerCount);return this.managerCount++,e},add:function(t){if(2==arguments.length){var e=arguments[1];return e.id=e.id||e.options.id||arguments[0].id,void this.addManager(e)}t.id||(t.id=this.getId(t.__idPrev())),this.managers[t.id]=t},remove:function(t){if("string"==typeof t||"number"==typeof t)delete lxl.managers[t];else if("object"==typeof t)if(t instanceof lxl.core.Component)delete lxl.managers[t.id];else{if(!$(t).attr(this.idAttrName))return!1;delete lxl.managers[$(t).attr(this.idAttrName)]}},get:function(t,e){if(e=e||"lxluiid","string"==typeof t||"number"==typeof t)return lxl.managers[t];if("object"==typeof t){var i=t.length?t[0]:t,n=i[e]||$(i).attr(e);return n?lxl.managers[n]:null}return null},find:function(t){var e=[];for(var i in this.managers){var n=this.managers[i];t instanceof Function?n instanceof t&&e.push(n):t instanceof Array?-1!=$.inArray(n.__getType(),t)&&e.push(n):n.__getType()==t&&e.push(n)}return e},run:function(t,e,i){if(t){if(i=$.extend({defaultsNamespace:"lxlDefaults",methodsNamespace:"lxlMethods",controlNamespace:"controls",idAttrName:"lxluiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},i||{}),t=t.replace(/^lxl/,""),null==this||this==window||i.isStatic)return lxl.plugins[t]||(lxl.plugins[t]={fn:$[lxl.pluginPrev+t],isStatic:!0}),new $.lxlui[i.controlNamespace][t]($.extend({},$[i.defaultsNamespace][t]||{},$[i.defaultsNamespace][t+"String"]||{},e.length>0?e[0]:{}));if(lxl.plugins[t]||(lxl.plugins[t]={fn:$.fn[lxl.pluginPrev+t],isStatic:!1}),/Mgr$/.test(t))return lxl.get(this,i.idAttrName);if(this.each(function(){if(this[i.idAttrName]||$(this).attr(i.idAttrName)){var n=lxl.get(this[i.idAttrName]||$(this).attr(i.idAttrName));return void(n&&e.length>0&&n.set(e[0]))}if(!(e.length>=1&&"string"==typeof e[0])){var o=e.length>0?e[0]:null,a=$.extend({},$[i.defaultsNamespace][t],$[i.defaultsNamespace][t+"String"],o);i.propertyToElemnt&&(a[i.propertyToElemnt]=this),i.hasElement?new $.lxlui[i.controlNamespace][t](this,a):new $.lxlui[i.controlNamespace][t](a)}}),0===this.length)return null;if(0===e.length)return lxl.get(this,i.idAttrName);if("object"==typeof e[0])return lxl.get(this,i.idAttrName);if("string"==typeof e[0]){var n=lxl.get(this,i.idAttrName);if(null==n)return;if("option"!=e[0]){var o=e[0];if(!n[o])return;var a=Array.apply(null,e);return a.shift(),n[o].apply(n,a)}if(2==e.length)return n.get(e[1]);if(e.length>=3)return n.set(e[1],e[2])}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{},each:function(t,e){var i,n=this;if("function"!=typeof e)return n;if(t=t||[],t.constructor===Object){for(i in t)if(e.call(t[i],i,t[i]))break}else for(i=0;i<t.length&&!e.call(t[i],i,t[i]);i++);return n}},$.lxlDefaults={},$.lxlMethos={},lxl.defaults=$.lxlDefaults,lxl.methods=$.lxlMethos,$.fn.lxl=function(t){return t?lxl.run.call(this,t,arguments):lxl.get(this)},lxl.core.Component=function(t){this.events=this.events||{},this.options=t||{},this.children={}},$.extend(lxl.core.Component.prototype,{__getType:function(){return"lxl.core.Component"},__idPrev:function(){return"lxlui"},set:function(t,e){if(t)if("object"!=typeof t){var i=t;if(0===i.indexOf("on"))return void("function"==typeof e&&this.bind(i.substr(2),e));if(this.options||(this.options={}),!1!==this.trigger("propertychange",[t,e])){this.options[i]=e;var n="_set"+i.substr(0,1).toUpperCase()+i.substr(1);this[n]&&this[n].call(this,e),this.trigger("propertychanged",[t,e])}}else{var o;if(this.options!=t?($.extend(this.options,t),o=t):o=$.extend({},t),void 0===e||!0===e)for(var a in o)0===a.indexOf("on")&&this.set(a,o[a]);if(void 0===e||!1===e)for(var a in o)0!==a.indexOf("on")&&this.set(a,o[a])}},get:function(t){var e="_get"+t.substr(0,1).toUpperCase()+t.substr(1);return this[e]?this[e].call(this,t):this.options[t]},hasBind:function(t){var e=t.toLowerCase(),i=this.events[e];return!(!i||!i.length)},trigger:function(t,e){if(t){var i=t.toLowerCase(),n=this.events[i];if(n){e=e||[],e instanceof Array==!1&&(e=[e]);for(var o=0;o<n.length;o++){var a=n[o];if(!1===a.handler.apply(a.context,e))return!1}}}},bind:function(t,e,i){if("object"!=typeof t){if("function"!=typeof e)return!1;var n=t.toLowerCase(),o=this.events[n]||[];i=i||this,o.push({handler:e,context:i}),this.events[n]=o}else for(var a in t)this.bind(a,t[a])},unbind:function(t,e){if(!t)return void(this.events={});var i=t.toLowerCase(),n=this.events[i];if(n&&n.length)if(e){for(var o=0,a=n.length;o<a;o++)if(n[o].handler==e){n.splice(o,1);break}}else delete this.events[i]},destroy:function(){lxl.remove(this)}}),lxl.core.UIComponent=function(t,e){lxl.core.UIComponent.base.constructor.call(this,e);var i=this._extendMethods();i&&$.extend(this,i),this.element=t,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},lxl.core.UIComponent.lxlExtend(lxl.core.Component,{__getType:function(){return"lxl.core.UIComponent"},_extendMethods:function(){},_init:function(){if(this.type=this.__getType(),this.element?this.id=this.options.id||this.element.id||lxl.getId(this.__idPrev()):this.id=this.options.id||lxl.getId(this.__idPrev()),lxl.add(this),this.element){var attributes=this.attr();if(attributes&&attributes instanceof Array)for(var i=0;i<attributes.length;i++){var name=attributes[i];this.options[name]=$(this.element).attr(name)}var p=this.options;if($(this.element).attr("lxlui"))try{var attroptions=$(this.element).attr("lxlui");0!==attroptions.indexOf("{")&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(t){}}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&$(this.element).attr("lxluiid",this.id)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,lxl.remove(this)}}),lxl.controls.Input=function(t,e){lxl.controls.Input.base.constructor.call(this,t,e)},lxl.controls.Input.lxlExtend(lxl.core.UIComponent,{__getType:function(){return"lxl.controls.Input"},attr:function(){return["nullText"]},setValue:function(t){return this.set("value",t)},getValue:function(){return this.get("value")},_setReadonly:function(t){var e=this.wrapper||this.text;if(e&&e.hasClass("input")){var i=this.inputText;t?(i&&i.prop("readonly",!0),e.addClass("input-readonly")):(i&&i.prop("readonly",!1),e.removeClass("input-readonly"))}},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(t,e){this.set({width:t,height:e})}}),lxl.draggable={dragging:!1},lxl.resizable={reszing:!1},$.fn.extend({hoverClass:function(t,e){var i=t||"hover";return this.each(function(){var t,n=$(this);n.hover(function(){t&&clearTimeout(t),n.addClass(i)},function(){t=setTimeout(function(){n.removeClass(i)},e||10)})})},focusClass:function(t){var e=t||"inputFocus";return this.each(function(){$(this).focus(function(){$(this).addClass(e)}).blur(function(){$(this).removeClass(e)})})},isBind:function(t){var e=$(this).data("events");return e&&t&&e[t]},unSelect:function(){$(this).css({"-webkit-user-select":"none","-moz-user-select":"none","user-select":"none"}).on("selectstart",function(){return!1})},selectText:function(){return this.each(function(){var t=null,e=null,i=$(this).get(0);$.browser.msie?(e=document.body.createTextRange(),e.moveToElementText(i),e.select()):$.browser.mozilla||$.browser.opera?(t=window.getSelection(),e=document.createRange(),e.selectNodeContents(i),t.removeAllRanges(),t.addRange(e)):$.browser.safari&&(t=window.getSelection(),t.setBaseAndExtent(i,0,i,1))})},fixedForIE6:function(t){if($.browser.msie&&7>$.browser.version){var e=$("html");"fixed"!==e.css("backgroundAttachment")&&e.css({backgroundAttachment:"fixed","text-overflow":"ellipsis"});var i=$.extend({left:0,top:0},t||{});return this.each(function(){$(this).css("position","absolute"),this.style.setExpression("left","eval((document.documentElement).scrollLeft+"+i.left+') + "px"'),this.style.setExpression("top","eval((document.documentElement).scrollTop+"+i.top+') + "px"')})}}}),!$.browser){var userAgent=navigator.userAgent.toLowerCase();$.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],chrome:/webkit/.test(userAgent),safari:/webkit/.test(userAgent),webkit:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent)||!!window.ActiveXObject||"ActiveXObject"in window,firefox:/firefox/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)}}}(jQuery),function(t,e,i){"$:nomunge";function n(){o=e[l](function(){a.each(function(){var e=t(this),i=e.width(),n=e.height(),o=t.data(this,d);i===o.w&&n===o.h||e.trigger(s,[o.w=i,o.h=n])}),n()},r[c])}var o,a=t([]),r=t.resize=t.extend(t.resize,{}),l="setTimeout",s="resize",d=s+"-special-event",c="delay";r[c]=250,r.throttleWindow=!0,t.event.special[s]={setup:function(){if(!r.throttleWindow&&this[l])return!1;var e=t(this);a=a.add(e),t.data(this,d,{w:e.width(),h:e.height()}),1===a.length&&n()},teardown:function(){if(!r.throttleWindow&&this[l])return!1;var e=t(this);a=a.not(e),e.removeData(d),a.length||clearTimeout(o)},add:function(e){if(!r.throttleWindow&&this[l])return!1;var i,n=function(e,n,o){var a=t(this),r=t.data(this,d);r.w=void 0!==n?n:a.width(),r.h=void 0!==o?o:a.height(),i.apply(this,arguments)};if(t.isFunction(e))return i=e,n;i=e.handler,e.handler=n}}}(jQuery,this),function($){$.fn.lxlAccordion=function(){return $.lxlui.run.call(this,"lxlAccordion",arguments)},$.fn.lxlAccordionMgr=function(){return $.lxlui.run.call(this,"lxlAccordionMgr",arguments)},$.lxlDefaults.Accordion={height:"100%",changeHeightOnResize:!0},$.lxlMethos.Accordion={},$.lxlui.controls.Accordion=function(t,e){$.lxlui.controls.Accordion.base.constructor.call(this,t,e)},$.lxlui.controls.Accordion.lxlExtend($.lxlui.core.UIComponent,{__getType:function(){return"Accordion"},__idPrev:function(){return"Accordion"},_extendMethods:function(){return $.lxlMethos.Accordion},_render:function(){var g=this,p=this.options,selectedIndex=0;g.accordion=$(g.element).addClass("accordion"),g.accordion.current=$("> div[selected='true']",g.accordion),g.accordion.current.length>0&&(selectedIndex=$("> div",g.accordion).index(g.accordion.current)),$.each($("> div",g.accordion),function(i,box){var header=$('<div class="accordion-header"><div class="accordion-header-inner"></div><div class="accordion-toggle"></div></div>');if(i==selectedIndex&&($(".accordion-toggle",header).addClass("accordion-toggle-open"),g.accordion.current.attr("data-url")&&(g.accordion.current.html('<p class="loaddata"><span class="loading">loading...</span></p>'),setTimeout(function(){g.accordion.current.load(ajaxPath2+g.accordion.current.attr("data-url"),function(){}).removeAttr("data-url")},1e3))),$(box).before(header),$(box).attr("title")&&($(".accordion-header-inner",header).html($(box).attr("title")),$(box).removeAttr("title")),$(box).attr("icon")&&($(".accordion-header-inner",header).before('<div class="accordion-ico"><img src="'+$(box).attr("icon")+'"></div>'),$(box).removeAttr("icon")),$(box).attr("headerStyle")){var attroptions=$(box).attr("headerStyle");0!==attroptions.indexOf("{")&&(attroptions='{"'+attroptions.substr(0,attroptions.length-1).replace(/[\s]+/g,"").replace(/[;]/g,'","').replace(/[:]/g,'":"')+'"}'),eval("attroptions = "+attroptions+";"),$(".accordion-header-inner",header).css(attroptions),$(box).attr("headerStyle","")}$(box).hasClass("accordion-content")||$(box).addClass("accordion-content")}),$(".accordion-toggle",g.accordion).each(function(){$(this).hasClass("accordion-toggle-open")||$(this).hasClass("accordion-toggle-close")||$(this).addClass("accordion-toggle-close"),$(this).hasClass("accordion-toggle-close")&&$(this).parent().next(".accordion-content:visible").hide()}),$("> div.accordion-header",g.accordion).eq(selectedIndex+1).addClass("accordion-header-next"),$("> div.accordion-header",g.accordion).hover(function(){$(this).addClass("accordion-header-hover"),$(this).find(".accordion-toggle").hasClass("accordion-toggle-open")?$(this).find(".accordion-toggle").addClass("accordion-toggle-open-hover"):$(this).find(".accordion-toggle").addClass("accordion-toggle-close-hover")},function(){$(this).removeClass("accordion-header-hover"),$(this).find(".accordion-toggle").hasClass("accordion-toggle-open")?$(this).find(".accordion-toggle").removeClass("accordion-toggle-open-hover"):$(this).find(".accordion-toggle").removeClass("accordion-toggle-close-hover")}),$("> div.accordion-header",g.accordion).click(function(){var t=$(".accordion-toggle:first",this),e=$(this).next(".accordion-content");if(!t.hasClass("accordion-toggle-close"))return!1;t.removeClass("accordion-toggle-close").removeClass("accordion-toggle-close-hover").addClass("accordion-toggle-open"),e.show().siblings(".accordion-content:visible").hide(),$(this).siblings(".accordion-header").find(".accordion-toggle").removeClass("accordion-toggle-open").addClass("accordion-toggle-close"),$(this).parent().children().removeClass("accordion-header-next"),$(this).next().next().addClass("accordion-header-next"),e.attr("data-url")&&e.html('<p class="loaddata"><span class="loading">loading...</span></p>').load(ajaxPath2+e.attr("data-url"),function(){}).removeAttr("data-url")}),g.headerHoldHeight=0,$("> .accordion-header",g.accordion).each(function(){g.headerHoldHeight+=$(this).outerHeight()}),p.height&&"string"==typeof p.height&&p.height.indexOf("%")>0?(g.onResize(),p.changeHeightOnResize&&$(window).resize(function(){g.onResize()})):p.height?(g.height=p.height,g.accordion.height(g.height),g.setHeight(p.height)):g.header=g.accordion.height(),g.set(p)},onResize:function(){var t=this,e=this.options;if(!e.height||"string"!=typeof e.height||-1==e.height.indexOf("%"))return!1;if("body"==t.accordion.parent()[0].tagName.toLowerCase()){var i=$(window).height();i-=parseInt(t.accordion.parent().css("paddingTop")),i-=parseInt(t.accordion.parent().css("paddingBottom")),t.height=i}else t.height=t.accordion.parent().height()*parseFloat(e.height)*.01,t.accordion.prev().length>0&&(t.height-=t.accordion.prev().outerHeight());t.accordion.height(t.height),$("> .accordion-content",t.accordion).height(t.height-t.headerHoldHeight)},setHeight:function(t){var e=this;this.options;e.accordion.height(t),t-=e.headerHoldHeight,$("> .accordion-content",e.accordion).height(t)}})}(jQuery),function(t){t.fn.lxlBox=function(){return t.lxlui.run.call(this,"lxlBox",arguments)},t.fn.lxlBoxMgr=function(){return t.lxlui.run.call(this,"lxlBoxMgr",arguments)},t.lxlDefaults.Box={width:"100%",height:"100%",headerHeight:null,toolbarHeight:null},t.lxlMethos.Box={},t.lxlui.controls.Box=function(e,i){t.lxlui.controls.Box.base.constructor.call(this,e,i)},t.lxlui.controls.Box.lxlExtend(t.lxlui.core.UIComponent,{__getType:function(){return"Box"},__idPrev:function(){return"Box"},_extendMethods:function(){return t.lxlMethos.Box},_render:function(){var e=this;this.options;e.box=t(this.element),e.box.header=t("div.header",e.box),e.box.tabbox=t("div.tabbox",e.box),e.box.footer=t("div.footer",e.box),e.box.tabtoolbar=t("div.tab_toolbar",e.box),e.box.tabheader=t("div.tab_header",e.box),e.box.tabcontent=t("div.tab_content",e.box),e.box.tabfooter=t("div.tab_footer",e.box),e.box.nodata=t("> div.nodata",e.box),t.browser.msie&&t.browser.version<7&&!t.support.style&&t("body").attr("scroll","no"),e.setTabContent(),e._onResize(),t(window).resize(function(){e._onResize()})},setTabContent:function(){var e=this;if(e.box.tabheader.length>0&&e.box.tabcontent.length>0){if((t("> table tr td",e.box.tabheader).eq(0).attr("width")+"").indexOf("%")>0)t("> table tr td",e.box.tabheader).each(function(i){var n=t(this).attr("width");t("> table tr",e.box.tabcontent).eq(0).find("td").eq(i).attr("width",n)});else{var i=0;t("> table tr td",e.box.tabheader).each(function(n){var o=t(this).outerWidth();t(this).removeAttr("width").width(o),t("> table tr",e.box.tabcontent).eq(0).find("td").eq(n).width(o),i+=o}),t("> table",e.box.tabheader).wrapAll('<div style="position: relative; left: 0; top: 0; width: '+i+'px"></div>'),t("> table",e.box.tabcontent).css({width:i+"px"}),e.box.tabheader.css({overflow:"hidden"}),e.box.tabcontent.css({overflow:"auto"}).scroll(function(){t("> div",e.box.tabheader).css({left:-t(this).scrollLeft()})})}t("> table tr:nth-child(even)",e.box.tabcontent).addClass("tr_c1"),t("> table tr",e.box.tabcontent).hoverClass("tr_c2")}},_onResize:function(){var e=this,i=this.options,n=null,o=null,a=null,r=null,l=!1;"string"==typeof i.width&&i.width.indexOf("%")>0?(e.box.is("body")?(n=t(window).width(),l=!0):n=e.box.parent().is("body")?t(window).width():e.box.parent().width(),a=n*parseFloat(i.width)*.01):a=parseInt(i.width),l||e.box.width(a),"string"==typeof i.height&&i.height.indexOf("%")>0?(e.box.is("body")?(o=t(window).height(),l=!0):o=e.box.parent().is("body")?t(window).height():e.box.parent().height(),r=o*parseFloat(i.height)*.01):r=parseInt(i.height),l||e.box.height(r),e.middleH=r,e.middleT=0,e.box.header.length>0&&(e.box.header.width(a),i.headerHeight&&e.box.header.height(i.headerHeight),e.middleH-=e.box.header.outerHeight(),e.middleT+=e.box.header.outerHeight()),e.box.footer.length>0&&(e.box.footer.width(a),e.middleH-=e.box.footer.outerHeight()),e.box.tabbox.length>0&&e.box.tabbox.css({width:a,height:e.middleH,top:e.middleT}),e.box.tabtoolbar.length>0&&(e.box.header.length>0&&e.box.tabtoolbar.css({top:e.box.header.outerHeight()}),e.middleH-=e.box.tabtoolbar.outerHeight(),e.middleT+=e.box.tabtoolbar.outerHeight()),e.box.tabheader.length>0&&(e.box.tabheader.css({top:e.middleT}),e.middleH-=e.box.tabheader.outerHeight(),e.middleT+=e.box.tabheader.outerHeight()),e.box.tabfooter.length>0&&(e.middleH-=e.box.tabfooter.outerHeight()),e.box.tabcontent.length>0&&e.box.tabcontent.css({height:e.middleH,top:e.middleT}),e.box.nodata.length>0&&e.box.nodata.css({top:e.middleT})}})}(jQuery),function($){$.fn.lxlDateInput=function(){return $.lxlui.run.call(this,"lxlDateInput",arguments)},$.fn.lxlDateInputMgr=function(){return $.lxlui.run.call(this,"lxlDateInputMgr",arguments)},$.lxlDefaults.DateInput={format:"yyyy-MM-dd hh:mm:ss",showTime:!1,initValue:null,absolute:!0,cancelable:!0,readonly:!1,disabled:!1,onChangeDate:!1},$.lxlDefaults.DateInputString={dayMessage:["日","一","二","三","四","五","六"],monthMessage:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],todayMessage:"选择今天",closeMessage:"关闭"},$.lxlMethos.DateInput={},$.lxlui.controls.DateInput=function(t,e){$.lxlui.controls.DateInput.base.constructor.call(this,t,e)},$.lxlui.controls.DateInput.lxlExtend($.lxlui.controls.Input,{__getType:function(){return"DateInput"},__idPrev:function(){return"DateInput"},_extendMethods:function(){return $.lxlMethos.DateInput},_render:function(){var t=this,e=this.options;if(!e.showTime&&e.format.indexOf(" hh:mm:ss")&&(e.format=e.format.replace(" hh:mm:ss","")),"input"==this.element.tagName.toLowerCase()&&"text"==this.element.type){t.inputText=$(this.element),t.inputText.hasClass("dateinput-text-field")||t.inputText.addClass("dateinput-text-field"),t.link=$('<div class="dateinput-trigger"><div class="dateinput-trigger-icon"></div></div>'),t.text=t.inputText.wrap('<div class="dateinput-text"></div>').parent(),e.showTime&&t.text.width(t.text.width()+35),t.text.append(t.link),t.textwrapper=t.text.wrap('<div class="dateinput-wrapper"></div>').parent(),t.textwrapper.width(t.text.width()),e.disabled&&(t.inputText.attr("disabled","disabled"),t.text.addClass("dateinput-text-disabled")),e.readonly&&(t.inputText.attr("readonly","readonly"),t.text.addClass("dateinput-text-readonly"));var i="";i+="<div class='dateinput' style='display:none'>",i+="    <div class='dateinput-header'>",i+="        <div class='dateinput-header-btn dateinput-header-prevyear'><span></span></div>",i+="        <div class='dateinput-header-btn dateinput-header-prevmonth'><span></span></div>",i+="        <div class='dateinput-header-text'><a  class='dateinput-header-year'></a> <a class='dateinput-header-month'></a></div>",i+="        <div class='dateinput-header-btn dateinput-header-nextmonth'><span></span></div>",i+="        <div class='dateinput-header-btn dateinput-header-nextyear'><span></span></div>",i+="    </div>",i+="    <div class='dateinput-body'>",i+="        <table cellpadding='0' cellspacing='0' border='0' class='dateinput-calendar'>",i+="            <thead>",i+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>",i+="            </thead>",i+="            <tbody>",i+="                <tr class='dateinput-first'><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>",i+="            </tbody>",i+="        </table>",i+="        <ul class='dateinput-monthselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='dateinput-yearselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='dateinput-hourselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='dateinput-minuteselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="    </div>",i+="    <div class='dateinput-toolbar'>",i+="        <div class='dateinput-time'></div>",i+="        <div class='dateinput-btn'><a href='javascript:void(0)' class='dateinput-btn-today'></a> | <a href='javascript:void(0)' class='dateinput-btn-close'></a></div>",i+="        <div class='dateinput-clear'></div>",i+="    </div>",i+="</div>",t.dateeditor=$(i),e.absolute?t.dateeditor.appendTo("body").addClass("dateinput-absolute"):t.textwrapper.append(t.dateeditor),t.header=$(".dateinput-header",t.dateeditor),t.body=$(".dateinput-body",t.dateeditor),t.toolbar=$(".dateinput-toolbar",t.dateeditor),t.body.thead=$("thead",t.body),t.body.tbody=$("tbody",t.body),t.body.monthselector=$(".dateinput-monthselector",t.body),t.body.yearselector=$(".dateinput-yearselector",t.body),t.body.hourselector=$(".dateinput-hourselector",t.body),t.body.minuteselector=$(".dateinput-minuteselector",t.body),t.toolbar.time=$(".dateinput-time",t.toolbar),t.toolbar.time.hour=$("<a></a>"),t.toolbar.time.minute=$("<a></a>"),t.buttons={btnPrevYear:$(".dateinput-header-prevyear",t.header),btnNextYear:$(".dateinput-header-nextyear",t.header),btnPrevMonth:$(".dateinput-header-prevmonth",t.header),btnNextMonth:$(".dateinput-header-nextmonth",t.header),btnYear:$(".dateinput-header-year",t.header),btnMonth:$(".dateinput-header-month",t.header),btnToday:$(".dateinput-btn-today",t.toolbar),btnClose:$(".dateinput-btn-close",t.toolbar)};var n=new Date;t.now={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDay(),date:n.getDate(),hour:n.getHours(),minute:n.getMinutes()},t.currentDate={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDay(),date:n.getDate(),hour:n.getHours(),minute:n.getMinutes()},t.selectedDate=null,t.usedDate=null,$("td",t.body.thead).each(function(t,i){$(i).html(e.dayMessage[t])}),$("li",t.body.monthselector).each(function(t,i){$(i).html(e.monthMessage[t])}),e.showTime&&(t.toolbar.time.show(),t.toolbar.time.append(t.toolbar.time.hour).append(":").append(t.toolbar.time.minute),$("li",t.body.hourselector).each(function(t){var e=t;t<10&&(e="0"+t.toString()),$(this).html(e)}),$("li",t.body.minuteselector).each(function(t){var e=t;t<10&&(e="0"+t.toString()),$(this).html(e)})),t.bulidContent(),t.buttons.btnYear.bind("selectstart",function(){return!1}).click(function(){t.body.yearselector.is(":visible")||$("li",t.body.yearselector).each(function(e){var i=t.currentDate.year+(e-4);i==t.currentDate.year?$(this).addClass("dateinput-selected"):$(this).removeClass("dateinput-selected"),$(this).html(i)}),t.body.yearselector.slideToggle()}),t.body.yearselector.hover(null,function(){$(this).slideUp()}),$("li",t.body.yearselector).click(function(){t.currentDate.year=parseInt($(this).html()),t.body.yearselector.slideToggle(),t.bulidContent()}),t.buttons.btnMonth.bind("selectstart",function(){return!1}).click(function(){$("li",t.body.monthselector).each(function(e){t.currentDate.month==e+1?$(this).addClass("dateinput-selected"):$(this).removeClass("dateinput-selected")}),t.body.monthselector.slideToggle()}),t.body.monthselector.hover(null,function(){$(this).slideUp("fast")}),$("li",t.body.monthselector).click(function(){var e=$("li",t.body.monthselector).index(this);t.currentDate.month=e+1,t.body.monthselector.slideToggle(),t.bulidContent()}),t.toolbar.time.hour.click(function(){$("li",t.body.hourselector).each(function(e){t.currentDate.hour==e?$(this).addClass("dateinput-selected"):$(this).removeClass("dateinput-selected")}),t.body.hourselector.slideToggle()}),t.body.hourselector.hover(null,function(){$(this).slideUp("fast")}),$("li",t.body.hourselector).click(function(){var e=$("li",t.body.hourselector).index(this);t.currentDate.hour=e,t.body.hourselector.slideToggle(),t.bulidContent(),t.showDate()}),t.toolbar.time.minute.click(function(){$("li",t.body.minuteselector).each(function(e){t.currentDate.minute==e?$(this).addClass("dateinput-selected"):$(this).removeClass("dateinput-selected")}),t.body.minuteselector.slideToggle("fast",function(){if($("li",this).index($("li.dateinput-selected",this))>29){var t=$("li.dateinput-selected",this).offset().top-$(this).offset().top;$(this).animate({scrollTop:t})}})}),t.body.minuteselector.hover(null,function(){$(this).slideUp("fast")}),$("li",t.body.minuteselector).click(function(){var e=$("li",t.body.minuteselector).index(this);t.currentDate.minute=e,t.body.minuteselector.slideToggle("fast"),t.bulidContent(),t.showDate()}),$("td",t.body.tbody).hover(function(){$(this).hasClass("dateinput-today")||$(this).addClass("dateinput-over")},function(){$(this).removeClass("dateinput-over")}).click(function(){$(".dateinput-selected",t.body.tbody).removeClass("dateinput-selected"),$(this).hasClass("dateinput-today")||$(this).addClass("dateinput-selected"),t.currentDate.date=parseInt($(this).html()),t.currentDate.day=new Date(t.currentDate.year,t.currentDate.month-1,1).getDay(),$(this).hasClass("dateinput-out")&&(0===$("tr",t.body.tbody).index($(this).parent())?0==--t.currentDate.month&&(t.currentDate.month=12,t.currentDate.year--):13==++t.currentDate.month&&(t.currentDate.month=1,t.currentDate.year++)),t.selectedDate={year:t.currentDate.year,month:t.currentDate.month,date:t.currentDate.date},t.showDate(),t.toggleDateInput(!0)}),t.buttons.btnPrevYear.hoverClass("dateinput-header-prevyear-over").bind("selectstart",function(){return!1}),t.buttons.btnNextYear.hoverClass("dateinput-header-nextyear-over").bind("selectstart",function(){return!1}),t.buttons.btnPrevMonth.hoverClass("dateinput-header-prevmonth-over").bind("selectstart",function(){return!1}),t.buttons.btnNextMonth.hoverClass("dateinput-header-nextmonth-over").bind("selectstart",function(){return!1}),t.buttons.btnPrevYear.click(function(){t.currentDate.year--,t.bulidContent()}),t.buttons.btnNextYear.click(function(){t.currentDate.year++,t.bulidContent()}),t.buttons.btnPrevMonth.click(function(){0==--t.currentDate.month&&(t.currentDate.month=12,t.currentDate.year--),t.bulidContent()}),t.buttons.btnNextMonth.click(function(){13==++t.currentDate.month&&(t.currentDate.month=1,t.currentDate.year++),t.bulidContent()}),t.buttons.btnToday.html(e.todayMessage).click(function(){t.currentDate={year:t.now.year,month:t.now.month,day:t.now.day,date:t.now.date},t.selectedDate={year:t.now.year,month:t.now.month,day:t.now.day,date:t.now.date},t.showDate(),t.toggleDateInput(!0)}),t.buttons.btnClose.html(e.closeMessage).click(function(){t.toggleDateInput(!0)}),t.link.click(function(){t.toggleDateInput(t.dateeditor.is(":visible"))}),e.initValue&&t.inputText.val(e.initValue),""!==t.inputText.val()&&t.onTextChange(),t.inputText.width(t.text.width()-25),t.inputText.change(function(){t.onTextChange()}).click(function(){t.toggleDateInput(!1)}).focus(function(){t.toggleDateInput(!1)}),t.dateeditor.hover(null,function(){t.dateeditor.is(":visible")&&!t.toggling&&t.toggleDateInput(!0)}),t.set(e)}},destroy:function(){this.textwrapper&&this.textwrapper.remove(),this.dateeditor&&this.dateeditor.remove(),this.options=null,$.lxlui.remove(this)},bulidContent:function(){var t=this,e=this.options,i=new Date(t.currentDate.year,t.currentDate.month-1,1).getDay(),n=t.currentDate.month,o=t.currentDate.year;13==++n&&(n=1,o++);var a=new Date(o,n-1,0).getDate(),r=new Date(t.currentDate.year,t.currentDate.month-1,0).getDate();t.buttons.btnMonth.html(e.monthMessage[t.currentDate.month-1]),t.buttons.btnYear.html(t.currentDate.year+"年"),t.toolbar.time.hour.html(t.currentDate.hour),t.toolbar.time.minute.html(t.currentDate.minute),1==t.toolbar.time.hour.html().length&&t.toolbar.time.hour.html("0"+t.toolbar.time.hour.html()),1==t.toolbar.time.minute.html().length&&t.toolbar.time.minute.html("0"+t.toolbar.time.minute.html()),$("td",this.body.tbody).each(function(){this.className=""}),$("tr",this.body.tbody).each(function(e,n){$("td",n).each(function(n,o){var l=7*e+(n-i),s=l+1;t.selectedDate&&t.currentDate.year==t.selectedDate.year&&t.currentDate.month==t.selectedDate.month&&l+1==t.selectedDate.date?(0!==n&&6!=n||$(o).addClass("dateinput-holiday"),$(o).addClass("dateinput-selected"),$(o).siblings().removeClass("dateinput-selected")):t.currentDate.year==t.now.year&&t.currentDate.month==t.now.month&&l+1==t.now.date?(0!==n&&6!=n||$(o).addClass("dateinput-holiday"),$(o).addClass("dateinput-today")):l<0?(s=r+s,$(o).addClass("dateinput-out").removeClass("dateinput-selected")):l>a-1?(s-=a,
$(o).addClass("dateinput-out").removeClass("dateinput-selected")):0===n||6==n?$(o).addClass("dateinput-holiday").removeClass("dateinput-selected"):o.className="",$(o).html(s)})})},updateSelectBoxPosition:function(){var t=this;if(this.options.absolute){var e=$(document).height();Number(t.text.offset().top+1+t.text.outerHeight()+t.dateeditor.height())>e&&e>Number(t.dateeditor.height()+1)?t.dateeditor.css({left:t.text.offset().left,top:t.text.offset().top-1-t.dateeditor.height()}):t.dateeditor.css({left:t.text.offset().left,top:t.text.offset().top+1+t.text.outerHeight()})}else t.text.offset().top+4>t.dateeditor.height()&&t.text.offset().top+t.dateeditor.height()+textHeight+4-$(window).scrollTop()>$(window).height()?(t.dateeditor.css("marginTop",-1*(t.dateeditor.height()+textHeight+5)),t.showOnTop=!0):t.showOnTop=!1},toggleDateInput:function(t){var e=this;this.options;e.toggling=!0,t?e.dateeditor.fadeOut("fast",function(){e.toggling=!1}):(e.updateSelectBoxPosition(),e.dateeditor.fadeIn("fast",function(){e.toggling=!1}))},showDate:function(){var t=this;this.options;if(t.currentDate){t.currentDate.hour=parseInt(t.toolbar.time.hour.html(),10),t.currentDate.minute=parseInt(t.toolbar.time.minute.html(),10);var e=t.currentDate.year+"/"+t.currentDate.month+"/"+t.currentDate.date+" "+t.currentDate.hour+":"+t.currentDate.minute,i=new Date(e);e=t.formatDate(i),this.inputText.val(e),this.onTextChange()}},isDateTime:function(t){var e=(this.options,t.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/));if(null==e)return!1;var i=new Date(e[1],e[3]-1,e[4]);return"NaN"!=i&&(i.getFullYear()==e[1]&&i.getMonth()+1==e[3]&&i.getDate()==e[4])},isLongDateTime:function(t){var e=(this.options,/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/),i=t.match(e);if(null==i)return!1;var n=new Date(i[1],i[3]-1,i[4],i[5],i[6]);return"NaN"!=n&&(n.getFullYear()==i[1]&&n.getMonth()+1==i[3]&&n.getDate()==i[4]&&n.getHours()==i[5]&&n.getMinutes()==i[6])},formatDate:function(t){var e=this.options;if("NaN"==t)return null;var i=e.format,n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in n)new RegExp("("+o+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return i},clear:function(){this.set("value",""),this.usedDate=null},_setCancelable:function(t){var e=this,i=this.options;!t&&e.unselect&&(e.unselect.remove(),e.unselect=null),(t||e.unselect)&&(e.unselect=$('<div class="dateinput-trigger dateinput-trigger-cancel"><div class="dateinput-trigger-icon"></div></div>').hide(),e.text.hover(function(){e.unselect.show()},function(){e.unselect.hide()}),!i.disabled&&i.cancelable&&e.text.append(e.unselect),e.unselect.click(function(){e.clear()}))},_rever:function(){var t=this;this.options;t.usedDate?t.inputText.val(t.formatDate(t.usedDate)):t.inputText.val("")},_getMatch:function(t){for(var e=[-1,-1,-1,-1,-1,-1],i=0,n="^",o=t||this.options.format;;){var a=o.match(/^y+|M+|d+|m+|h+|s+|-|\/|:|\s/);if(!a)return null;var r=a[0].charAt(0),l=a[0].length,s="yMdhms".indexOf(r);if(-1!=s)e[s]=i+1,n+="(\\d{1,"+l+"})";else{n+="("+(" "==r?"\\s":r)+")"}if(i++,l==o.length){n+="$";break}o=o.substring(l)}return{reg:new RegExp(n),position:e}},_bulidDate:function(t){var e=this,i=this.options,n=e._getMatch();if(!n)return null;i.showTime&&!t.match(n.reg)&&(t=e.formatDate(new Date(t.replaceAll("-","/"))));var o=t.match(n.reg);if(!o)return null;var a={y:-1==n.position[0]?1900:o[n.position[0]],M:-1==n.position[1]?0:parseInt(o[n.position[1]],10)-1,d:-1==n.position[2]?1:parseInt(o[n.position[2]],10),h:-1==n.position[3]?0:parseInt(o[n.position[3]],10),m:-1==n.position[4]?0:parseInt(o[n.position[4]],10),s:-1==n.position[5]?0:parseInt(o[n.position[5]],10)};if(a.M<0||a.M>11||a.d<0||a.d>31)return null;var r=new Date(a.y,a.M,a.d);if(i.showTime){if(a.m<0||a.m>59||a.h<0||a.h>23||a.s<0||a.s>59)return null;r.setHours(a.h),r.setMinutes(a.m),r.setSeconds(a.s)}return r},updateStyle:function(){this.onTextChange()},onTextChange:function(){var t=this,e=(this.options,t.inputText.val());if(!e)return t.selectedDate=null,!0;var i=t._bulidDate(e);if(!i)return void t._rever();t.usedDate=i,t.selectedDate={year:t.usedDate.getFullYear(),month:t.usedDate.getMonth()+1,day:t.usedDate.getDay(),date:t.usedDate.getDate(),hour:t.usedDate.getHours(),minute:t.usedDate.getMinutes()},t.currentDate={year:t.usedDate.getFullYear(),month:t.usedDate.getMonth()+1,day:t.usedDate.getDay(),date:t.usedDate.getDate(),hour:t.usedDate.getHours(),minute:t.usedDate.getMinutes()};var n=t.formatDate(i);t.inputText.val(n),t.trigger("changeDate",[n]),$(t.dateeditor).is(":visible")&&t.bulidContent()},_setHeight:function(t){var e=this;t>4&&(e.text.css({height:t}),e.inputText.css({height:t}),e.textwrapper.css({height:t}))},_setWidth:function(t){var e=this;t>25&&(e.text.css({width:t}),e.inputText.css({width:t-25}),e.textwrapper.css({width:t}))},_setValue:function(value){var g=this;value||g.inputText.val(""),"string"==typeof value&&(/^\/Date/.test(value)?(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)):g.inputText.val(value)),"object"==typeof value&&value instanceof Date&&(g.inputText.val(g.formatDate(value)),g.onTextChange())},_getValue:function(){return this.usedDate},setEnabled:function(){var t=this.options;this.inputText.removeAttr("disabled"),this.text.removeClass("dateinput-text-disabled"),t.disabled=!1},setDisabled:function(){var t=this.options;this.inputText.attr("disabled","disabled"),this.text.addClass("dateinput-text-disabled"),t.disabled=!0}})}(jQuery),function(t){t.lxlDialog=function(){return t.lxlui.run.call(null,"lxlDialog",arguments,{isStatic:!0})},t.lxlDefaults.Dialog={type:"info",title:"系统提示",content:"",url:null,left:null,top:null,right:null,bottom:null,width:null,height:null,buttons:null,target:null,load:!1,iframeStyle:null,allowIcon:!0,allowClose:!0,allowMask:!0,closeWhenEnter:!0,isDrag:!0,isResize:!0,isHide:!1,onLoaded:null},t.lxlMethos.Dialog=t.lxlMethos.Dialog||{},t.lxlui.controls.Dialog=function(e){t.lxlui.controls.Dialog.base.constructor.call(this,null,e)},t.lxlui.controls.Dialog.lxlExtend(t.lxlui.core.UIComponent,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return t.lxlMethos.Dialog},_render:function(){var e=this,i=this.options;e.set(i,!0);var n=t('<div class="dialog"><div class="dialog-head"><span class="dialog-title"></span></div><a class="dialog-close" title="关闭"></a><div class="dialog-body"><div class="dialog-con clearfix">'+(i.allowIcon?'<div class="dialog-cl"><div class="dialog-'+i.type+'"></div></div>':"")+'<div class="dialog-cr"><div class="info"></div></div></div></div><div class="dialog-foot"><div class="dialog-btns"></div></div></div>');if(t("body").append(n),e.dialog=n,e.element=n[0],e.dialog.mask=t('<div class="dialog-mask"></div>'),i.allowMask&&t("body").append(e.dialog.mask),e.dialog.header=t(".dialog-head:first",e.dialog),e.dialog.title=t(".dialog-title:first",e.dialog),e.dialog.close=t(".dialog-close:first",e.dialog),e.dialog.body=t(".dialog-body:first",e.dialog),e.dialog.content=t(".dialog-con:first",e.dialog),e.dialog.content.info=t(".info",e.dialog.content),e.dialog.footer=t(".dialog-foot:first",e.dialog),e.dialog.buttons=t(".dialog-btns:first",e.dialog),e.set(i,!1),"popup"==i.type?e.dialog.css("min-height","100px"):e.dialog.css("min-height","160px"),"popup"!=i.type&&"preview"!=i.type||(e.dialog.body.css("overflow-y","auto"),e.dialog.content.addClass(i.type).removeClass("clearfix")),i.target)e.dialog.content.info.html(i.target);else if("upload"==i.type&&i.url){e.dialog.content.info.html('<iframe frameborder="0" scrolling="no"></iframe>');var o=i.name?i.name:"lxlwindow"+(new Date).getTime();e.iframe=t("iframe:first",e.dialog.body),e.iframe.attr({name:o,id:o,style:i.iframeStyle}),setTimeout(function(){e.iframe.attr("src",i.url),e._setLoading()},1)}else if(i.type&&i.url)if(i.load)i.url+=-1==i.url.indexOf("?")?"?":"&",i.url+="t="+(new Date).getTime(),e.dialog.body.html("").load(i.url,function(){e._saveSizeAndPos()});else{e.dialog.body.html('<iframe frameborder="0" scrolling="no"></iframe>');var o=i.name?i.name:"lxlwindow"+(new Date).getTime();i.height&&(e.dialog.height(i.height),e.dialog.body.height(i.height-72)),e.iframe=t(">iframe:first",e.dialog.body);var a=i.height-36;i.buttons&&(a-=36),e.iframe.attr({name:o,id:o,style:(i.iframeStyle?i.iframeStyle:"")+"width: 100%; height: "+a+"px;"}),setTimeout(function(){e.iframe.attr("src",i.url),e._setLoading()},1)}if(i.buttons?t(i.buttons).each(function(i,n){var o=t('<input type="button" class="button" value="" />').attr({id:n.id,name:n.type}).val(n.text);e.dialog.buttons.prepend(o),n.onclick&&o.click(function(){n.onclick(e,t(this),n,i)}),o.hoverClass("button-hover").mousedown(function(){t(this).addClass("button-active")}).mouseup(function(){t(this).removeClass("button-active")}),void 0===n.display?o.show():o.hide(),"yes"!=n.type&&"ok"!=n.type||(e.dialog.buttons.ok=o)}):"popup"==i.type||"iframe"==i.type?(e.dialog.footer.remove(),e.dialog.body.height(e.dialog.height()-e.dialog.header.height())):e.dialog.buttons.remove(),!1===i.allowClose?e.dialog.close.remove():e.dialog.close.attr("href","javascript:;").click(function(){i.isHide?e._hide():e.close()}),"popup"==i.type)for(var r=0,l=lxl.find(e.__getType()),d=0;d<l.length;d++)r=d*e.dialog.height()+7*(d+1),l[d]._setRight(0),l[d]._setBottom(r);i.isDrag&&e._applyDrag(),i.isResize&&e._applyResize(),e._onResize(),e._saveSizeAndPos(),e._show(),i.target?t("#txtInput").focus().select().keydown(function(t){t=t||event||window.parentWindow.event,13==(t.charCode||t.keyCode||t.which)&&e.dialog.buttons.ok.click()}).keyup(function(){"排序"==e.dialog.title.text()&&(new RegExp(/^\d+$/).test(t(this).val())||t(this).val(s))}):"popup"!=i.type&&e.dialog.close&&e.dialog.close.focus(),e.trigger("loaded"),t(document).bind("keydown.dialog",function(t){switch(t=t||event||window.parentWindow.event,t.charCode||t.keyCode||t.which){case 13:var n;void 0!==i.closeWhenEnter?n=i.closeWhenEnter:"warning"!=i.type&&"error"!=i.type&&"success"!=i.type&&"question"!=i.type||(n=!0),n&&(i.isHide?e._hide():e.close());break;case 27:i.isHide?e._hide():e.close()}}),t(window).resize(function(){e._onResize.call(e)})},_setLoading:function(){var e=this,i=this.options;"complete"!=e.iframe[0].readyState&&(0===e.dialog.body.find("div.dialog-loading:first").length&&e.dialog.body.prepend("<div class='dialog-loading' style='display:block;width:100%;height:"+(i.height-72)+"px;'></div>"),e.iframe.bind("load.dialog",function(){t("div.dialog-loading:first",e.dialog.body).hide()}))},_setLeft:function(t){this.dialog&&null!=t&&this.dialog.css({left:t})},_setTop:function(t){this.dialog&&null!=t&&this.dialog.css({top:t})},_setRight:function(t){this.dialog&&null!=t&&this.dialog.css({right:t})},_setBottom:function(t){this.dialog&&null!=t&&this.dialog.css({bottom:t})},_setWidth:function(t){this.dialog&&null!=t&&this.dialog.width(t).css({"min-width":t})},_setHeight:function(t){this.dialog&&null!=t&&this.dialog.body.height(t-("popup"==this.options.type?36:72))},_setTitle:function(t){t&&this.dialog.title.html(t)},_setContent:function(t){t&&this.dialog.content.info.html(t)},_setUrl:function(t){var e=this,i=this.options;i.url=t,i.load?e.dialog.content.html("").load(i.url,function(){e._saveSizeAndPos()}):e.iframe&&e.iframe.attr("src",i.url)},_saveSizeAndPos:function(){var t=this,e=(this.options,0),i=0;t._width=t.dialog.width(),t._height=t.dialog.height(),isNaN(parseInt(t.dialog.css("top")))||(e=parseInt(t.dialog.css("top"))),isNaN(parseInt(t.dialog.css("left")))||(i=parseInt(t.dialog.css("left"))),t._top=e,t._left=i},_applyDrag:function(){var e=this,i=this.options;t.fn.lxlDrag&&(e.draggable=e.dialog.lxlDrag({handler:".dialog-head",onStopDrag:function(){"popup"==i.type&&(e.dialog.css("right","inherit"),e.dialog.css("bottom","inherit")),e._saveSizeAndPos()}}))},_applyResize:function(){var e=this;this.options;t.fn.lxlResizable&&(e.resizable=e.dialog.lxlResizable({onStopResize:function(i){var n=0,o=0;return isNaN(parseInt(e.dialog.css("top")))||(n=parseInt(e.dialog.css("top"))),isNaN(parseInt(e.dialog.css("left")))||(o=parseInt(e.dialog.css("left"))),i.diffLeft&&e.dialog.css({left:o+i.diffLeft}),i.diffTop&&e.dialog.css({top:n+i.diffTop}),i.newWidth&&e.dialog.css({width:i.newWidth}),i.newHeight&&(i.newHeight>t(window).height()&&(i.newHeight=t(window).height()),e.dialog.height(i.newHeight),e.dialog.body.height(i.newHeight-72)),e._onResize(),e._saveSizeAndPos(),!1}}))},_onResize:function(){var e=this,i=this.options,n=i.left||0,o=i.top||0,a=i.right,r=i.bottom,l=i.width||e.dialog.width(),s=i.height||e.dialog.height();null==a&&null==r&&"popup"!=i.type&&(n=n<0?0:.5*(t(window).width()-l),o=o<0?0:.5*(t(window).height()-s)+t(window).scrollTop(),e.dialog.css({left:n,top:o})),e.dialog.mask.css({width:t(window).width(),height:t(window).height()})},_show:function(){var t=this;this.options;t.dialog.mask.show(),t.dialog.show()},_hide:function(){var t=this;t.dialog.mask.hide(),t.dialog.hide()},bottom:function(){return this.dialog.css("bottom")},close:function(){var e=this;this.options;lxl.remove(e.id),e.dialog.mask.remove(),e.dialog.remove(),t(document).unbind("keydown.dialog")}}),t.lxlDialog.open=function(e){return t.lxlDialog(e)},t.lxlDialog.close=function(){var e=t.lxlui.find(t.lxlui.controls.Dialog.prototype.__getType());for(var i in e)e[i].close()},t.lxlDialog.show=function(e){var i=t.lxlui.find(t.lxlui.controls.Dialog.prototype.__getType());if(i.length)for(var n in i)return void i[n]._show();return t.lxlDialog(e)},t.lxlDialog.hide=function(){var e=t.lxlui.find(t.lxlui.controls.Dialog.prototype.__getType());for(var i in e)e[i]._hide()},t.lxlDialog.success=function(e,i,n){return t.lxlDialog.alert(e,i,"success",n)},t.lxlDialog.error=function(e,i,n){return t.lxlDialog.alert(e,i,"error",n)},t.lxlDialog.warning=function(e,i,n){return t.lxlDialog.alert(e,i,"warning",n)},t.lxlDialog.question=function(e,i){return t.lxlDialog.alert(e,i,"question")},t.lxlDialog.prohibit=function(e,i){return t.lxlDialog.alert(e,i,"prohibit")},t.lxlDialog.alert=function(e,i,n,o){e=e||"","function"==typeof i?(o=i,n=null):"function"==typeof n&&(o=n);var a=function(t,e,i,n){t.close(),o&&o(t,e,i,n)},r={content:e,buttons:[{text:" 确认 ",onclick:a,type:"ok"}]};return"string"==typeof i&&""!==i&&(r.title=i),"string"==typeof n&&""!==n&&(r.type=n),t.lxlDialog(r)},t.lxlDialog.confirm=function(e,i,n,o){"function"==typeof i&&(n=i);var a=function(t,e,i){t.close(),n&&n("yes"==i.type)},r=function(t,e,i){t.close(),o&&o("no"==i.type)},l={type:"question",content:e,buttons:[{text:" 是 ",onclick:a,type:"yes"},{text:" 否 ",onclick:r,type:"no"}]};return"string"==typeof i&&""!==i&&(l.title=i),t.lxlDialog(l)},t.lxlDialog.prompt=function(e,i,n,o,a){var r=i+'<input type="text" id="txtInput" value="'+n+'" class="input" />';"function"==typeof o&&(a=o),"boolean"==typeof o&&o&&(r='<textarea id="txtInput" class="textarea" style="width: 320px; height: 55px" placeholder="'+i+'">'+n+"</textarea>"),"string"!=typeof n&&"number"!=typeof n||t("#txtInput").val(n);var l=function(e,i,n){a&&a("ok"==n.type,t("#txtInput").val()),e.close()};return t.lxlDialog({title:e,target:r,buttons:[{text:" 确认 ",onclick:l,type:"ok"},{text:" 取消 ",onclick:l,type:"cancel"}]})},t.lxlDialog.popup=function(e,i,n){var o={type:"popup",width:300,allowIcon:!1,allowMask:!1,isResize:!1,content:e||"",onLoaded:function(){n&&n()}};return"string"==typeof i&&""!==i&&(o.title=i),t.lxlDialog(o)},t.lxlDialog.preview=function(e,i,n,o){var a=function(t,e,i){t.close()},r={type:"preview",allowIcon:!1,isResize:!1,content:e||"",buttons:[{text:" 关闭 ",onclick:a,type:"close"}],onLoaded:function(){o&&o()}};return"string"==typeof i&&""!==i&&(r.title=i),"number"==typeof n&&0!==n&&(r.height=n),t.lxlDialog(r)}}(jQuery),function(t){t.fn.lxlDrag=function(){return t.lxlui.run.call(this,"lxlDrag",arguments,{idAttrName:"lxluidragid",hasElement:!1,propertyToElemnt:"target"})},t.fn.lxlDragMgr=function(){return t.lxlui.run.call(this,"lxlDragMgr",arguments,{idAttrName:"lxluidragid",hasElement:!1,propertyToElemnt:"target"})},t.lxlDefaults.Drag={handler:null,receive:null,proxy:!0,proxyX:null,proxyY:null,revert:null,animate:!1,disabled:!1,onStartDrag:!1,onDrag:!1,onStopDrag:!1,onRevert:null,onEndRevert:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null},t.lxlui.controls.Drag=function(e){t.lxlui.controls.Drag.base.constructor.call(this,null,e)},t.lxlui.controls.Drag.lxlExtend(t.lxlui.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){var t=this,e=this.options;this.set(e),t.cursor="move",t.handler.css("cursor",t.cursor),t.handler.unSelect(),t.handler.bind("mousedown.drag",function(i){e.disabled||2!=i.button&&(t._start.call(t,i),this.setCapture&&this.setCapture(!1),i.preventDefault())}).bind("mousemove.drag",function(){e.disabled||t.handler.css("cursor",t.cursor)}).bind("mouseup.drag",function(){this.releaseCapture&&this.releaseCapture()})},_rendered:function(){this.options.target.lxluidragid=this.id},_start:function(e){var i=this,n=this.options;if(!i.reverting&&!n.disabled){if(i.current={target:i.target,left:i.target.offset().left,top:i.target.offset().top,startX:e.clientX,startY:e.clientY},!1===i.trigger("startDrag",[i.current,e]))return!1;if(i.cursor="move",i._createProxy(n.proxy,e),n.proxy&&!i.proxy)return!1;(i.proxy||i.handler).css("cursor",i.cursor),t(document).bind("selectstart.drag",function(){return!1}),t(document).bind("mousemove.drag",function(){i._drag.apply(i,arguments)}),t.lxlui.draggable.dragging=!0,t(document).bind("mouseup.drag",function(){t.lxlui.draggable.dragging=!1,i._stop.apply(i,arguments)})}},_drag:function(e){var i=this;this.options;if(i.current){var n=e.pageX||e.clientX,o=e.pageY||e.clientY;i.current.diffX=n-i.current.startX,i.current.diffY=o-i.current.startY,(i.proxy||i.handler).css("cursor",i.cursor),i.receive&&i.receive.each(function(a,r){var l=t(r),s=l.offset();n>s.left&&n<s.left+l.width()&&o>s.top&&o<s.top+l.height()?i.receiveEntered[a]?i.trigger("dragOver",[r,i.proxy||i.target,e]):(i.receiveEntered[a]=!0,i.trigger("dragEnter",[r,i.proxy||i.target,e])):i.receiveEntered[a]&&(i.receiveEntered[a]=!1,i.trigger("dragLeave",[r,i.proxy||i.target,e]))}),i.hasBind("drag")?!1!==i.trigger("drag",[i.current,e])?i._applyDrag():i.proxy?i._removeProxy():i._stop():i._applyDrag()}},_stop:function(e){var i=this,n=this.options;t(document).unbind("mousemove.drag").unbind("mouseup.drag").unbind("selectstart.drag"),i.receive&&i.receive.each(function(t,n){i.receiveEntered[t]&&i.trigger("drop",[n,i.proxy||i.target,e])}),i.proxy&&(n.revert?i.hasBind("revert")?!1!==i.trigger("revert",[i.current,e])?i._revert(e):i._removeProxy():i._revert(e):(i._applyDrag(i.target),i._removeProxy())),i.cursor="move",i.trigger("stopDrag",[i.current,e]),i.current=null,i.handler.css("cursor",i.cursor)},_revert:function(t){var e=this;e.reverting=!0,e.proxy.animate({left:e.current.left,top:e.current.top},function(){e.reverting=!1,e._removeProxy(),e.trigger("endRevert",[e.current,t]),e.current=null})},_applyDrag:function(e){var i=this,n=this.options;e=e||i.proxy||i.target;var o={},a=e==i.target;if(i.current.diffX){var r=i.target.outerWidth();a||null==n.proxyX?(o.left=i.current.left+i.current.diffX,r=e.outerWidth()):o.left=i.current.startX+n.proxyX+i.current.diffX,o.left<0&&(o.left=0),r=t(window).width()-r,o.left>r&&(o.left=r),!0}if(i.current.diffY){var l=i.target.outerHeight();a||null==n.proxyY?(o.top=i.current.top+i.current.diffY,l=e.outerHeight()):o.top=i.current.startY+n.proxyY+i.current.diffY,o.top<0&&(o.top=0),l=t(window).height()-l,o.top>l&&(o.top=l),!0}e==i.target&&i.proxy&&n.animate?(i.reverting=!0,e.animate(o,function(){i.reverting=!1})):e.css(o)},_setReceive:function(e){var i=this;i.receiveEntered={},e&&(i.receive="string"==typeof e?t(e):e)},_setHandler:function(e){var i=this,n=this.options;i.handler=e?"string"==typeof e?t(e,n.target):e:t(n.target)},_setTarget:function(e){this.target=t(e)},_setCursor:function(t){var e=this;e.cursor=t,(e.proxy||e.handler).css("cursor",t)},_createProxy:function(e,i){if(e){var n=this,o=this.options;"function"==typeof e?n.proxy=e.call(this.options.target,n,i):"clone"==e?(n.proxy=n.target.clone().css("position","absolute"),n.proxy.appendTo("body")):(n.proxy=t("<div class='draggable'></div>"),n.proxy.width(n.target.width()-2).height(n.target.height()-2),n.proxy.attr("dragid",n.id).appendTo("body")),n.proxy.css({left:null==o.proxyX?n.current.left:n.current.startX+o.proxyX,top:null==o.proxyY?n.current.top:n.current.startY+o.proxyY}).show()}},_removeProxy:function(){var t=this;t.proxy&&(t.proxy.remove(),t.proxy=null)}})}(jQuery),function(t){t.fn.lxlLayout=function(){return t.lxlui.run.call(this,"lxlLayout",arguments)},t.fn.lxlLayoutMgr=function(){return t.lxlui.run.call(this,"lxlLayoutMgr",arguments)},t.lxlDefaults.Layout={topHeight:50,bottomHeight:25,leftWidth:null,minLeftWidth:180,rightWidth:null,minRightWidth:160,centerWidth:360,height:"100%",heightDiff:0,space:3,dropVal:3,inIframe:!1,inWindow:!0,onHeightChanged:null,onEndResize:null,isLeftCollapse:!1,isRightCollapse:!1,allowLeftCollapse:!0,allowRightCollapse:!0,allowLeftResize:!0,allowRightResize:!1,allowTopResize:!1,allowBottomResize:!1},t.lxlMethos.Layout={},t.lxlui.controls.Layout=function(e,i){t.lxlui.controls.Layout.base.constructor.call(this,e,i)},t.lxlui.controls.Layout.lxlExtend(t.lxlui.core.UIComponent,{__getType:function(){return"Layout"},__idPrev:function(){return"Layout"},_extendMethods:function(){return t.lxlMethos.Layout},_render:function(){var e=this,i=this.options;if(e.layout=t(this.element),e.layout.addClass("layout"),e.width=e.layout.width(),t("> div.top",e.layout).length>0&&(e.top=t("> div.top",e.layout).wrap('<div class="layout-top" style="top:0px;"></div>').parent(),e.top.content=t("> div.top",e.top),e.top.content.hasClass("layout-content")||e.top.content.addClass("layout-content"),e.topHeight=i.topHeight,e.topHeight&&e.top.outerHeight(e.topHeight)),t("> div.bottom",e.layout).length>0){e.bottom=t("> div.bottom",e.layout).wrap('<div class="layout-bottom"></div>').parent(),e.bottom.content=t("> div.bottom",e.bottom),e.bottom.content.hasClass("layout-content")||e.bottom.content.addClass("layout-content"),e.bottomHeight=i.bottomHeight,e.bottomHeight&&e.bottom.outerHeight(e.bottomHeight);var n=e.bottom.content.attr("title");n&&(e.bottom.header=t('<div class="layout-header"></div>'),e.bottom.prepend(e.bottom.header),e.bottom.header.html(n),e.bottom.content.attr("title",""))}if(t("> div.left",e.layout).length>0){e.left=t("> div.left",e.layout).wrap('<div class="layout-left" style="left:0px;"></div>').parent(),e.left.header=t('<div class="layout-header"><div class="layout-header-toggle"></div><div class="layout-header-inner"></div></div>'),e.left.prepend(e.left.header),e.left.header.toggle=t(".layout-header-toggle",e.left.header),e.left.content=t("> div.left",e.left),e.left.content.hasClass("layout-content")||e.left.content.addClass("layout-content"),i.allowLeftCollapse||t(".layout-header-toggle",e.left.header).remove();var o=e.left.content.attr("title");o&&(e.left.content.attr("title",""),t(".layout-header-inner",e.left.header).html(o)),i.inIframe&&e.left.addClass("layout-left-iniframe"),e.leftWidth=i.minLeftWidth,e.leftWidth&&e.left.outerWidth(e.leftWidth)}if(t("> div.right",e.layout).length>0){e.right=t("> div.right",e.layout).wrap('<div class="layout-right"></div>').parent(),e.right.header=t('<div class="layout-header"><div class="layout-header-toggle"></div><div class="layout-header-inner"></div></div>'),e.right.prepend(e.right.header),e.right.header.toggle=t(".layout-header-toggle",e.right.header),i.allowRightCollapse||t(".layout-header-toggle",e.right.header).remove(),e.right.content=t("> div.right",e.right),e.right.content.hasClass("layout-content")||e.right.content.addClass("layout-content");var a=e.right.content.attr("title");a&&(e.right.content.attr("title",""),t(".layout-header-inner",e.right.header).html(a)),i.inIframe&&e.right.addClass("layout-right-iniframe"),e.rightWidth=i.minRightWidth,e.rightWidth&&e.right.outerWidth(e.rightWidth)}if(t("> div.center",e.layout).length>0){e.center=t("> div.center",e.layout).wrap('<div class="layout-center" ></div>').parent(),e.center.content=t("> div.center",e.center),e.center.content.addClass("layout-content");var r=e.center.content.attr("title");r&&(e.center.content.attr("title",""),e.center.header=t('<div class="layout-header"></div>'),e.center.prepend(e.center.header),e.center.header.html(r)),i.inIframe&&e.center.addClass("layout-center-iniframe"),e.centerWidth=i.centerWidth,e.centerWidth&&e.center.outerWidth(e.centerWidth)}t("> .layout-left .layout-header,> .layout-right .layout-header",e.layout).hoverClass("layout-header-over"),t(".layout-header-toggle",e.layout).hoverClass("layout-header-toggle-over"),e.layout.lock=t("<div class='layout-lock'></div>"),e.layout.append(e.layout.lock),e._addDropHandle(),e.isLeftCollapse=i.isLeftCollapse,e.isRightCollapse=i.isRightCollapse,e.leftCollapse=t('<div class="layout-collapse-left" style="display: none; "><div class="layout-collapse-left-toggle"></div></div>'),e.rightCollapse=t('<div class="layout-collapse-right" style="display: none; "><div class="layout-collapse-right-toggle"></div></div>'),e.layout.append(e.leftCollapse).append(e.rightCollapse),i.inIframe&&(e.leftCollapse.addClass("layout-left-iniframe"),e.rightCollapse.addClass("layout-right-iniframe")),e.leftCollapse.toggle=t("> .layout-collapse-left-toggle",e.leftCollapse),e.rightCollapse.toggle=t("> .layout-collapse-right-toggle",e.rightCollapse),e._setCollapse(),e.middleTop=0,e.top&&(e.middleTop+=e.top.outerHeight(),e.middleTop+=i.space),e.left&&(e.left.css({left:i.space,top:e.middleTop}),e.leftCollapse.css({left:i.space,top:e.middleTop})),e.right&&(e.right.css({right:i.space,top:e.middleTop}),e.rightCollapse.css({right:i.space,top:e.middleTop})),e.center&&(i.inIframe&&(e.left&&!e.right?e.center.css("border-right",0):!e.left&&e.right&&e.center.css("border-left",0),i.allowLeftResize||i.space||e.center.css("border-left",0),i.allowRightResize||i.space||e.center.css("border-right",0)),e.center.css({top:e.middleTop})),e._onResize(),t(window).resize(function(){e._onResize()}),e.set(i)},setLeftCollapse:function(t){var e=this;this.options;if(!e.left)return!1;e.isLeftCollapse=t,e.isLeftCollapse?(e.leftCollapse.show(),e.leftDropHandle&&e.leftDropHandle.hide(),e.left.hide()):(e.leftCollapse.hide(),e.leftDropHandle&&e.leftDropHandle.show(),e.left.show()),e._onResize()},setRightCollapse:function(t){var e=this;this.options;if(!e.right)return!1;e.isRightCollapse=t,e._onResize(),e.isRightCollapse?(e.rightCollapse.show(),e.rightDropHandle&&e.rightDropHandle.hide(),e.right.hide()):(e.rightCollapse.hide(),e.rightDropHandle&&e.rightDropHandle.show(),e.right.show()),e._onResize()},_setCollapse:function(){var e=this;this.options;e.leftCollapse.hoverClass("layout-collapse-left-over"),e.leftCollapse.toggle.hoverClass("layout-collapse-left-toggle-over"),e.rightCollapse.hoverClass("layout-collapse-right-over"),e.rightCollapse.toggle.hoverClass("layout-collapse-right-toggle-over"),e.leftCollapse.toggle.click(function(){e.setLeftCollapse(!1)}),e.rightCollapse.toggle.click(function(){e.setRightCollapse(!1)}),e.left&&e.isLeftCollapse&&(e.leftCollapse.show(),e.leftDropHandle&&e.leftDropHandle.hide(),e.left.hide()),e.right&&e.isRightCollapse&&(e.rightCollapse.show(),e.rightDropHandle&&e.rightDropHandle.hide(),e.right.hide()),t(".layout-header-toggle",e.left).click(function(){e.setLeftCollapse(!0)}),t(".layout-header-toggle",e.right).click(function(){e.setRightCollapse(!0)})},_addDropHandle:function(){var e=this,i=this.options;e.left&&i.allowLeftResize&&(e.leftDropHandle=t("<div class='layout-drophandle-left'></div>"),e.layout.append(e.leftDropHandle),e.leftDropHandle&&e.leftDropHandle.show(),e.leftDropHandle.mousedown(function(t){e._start("leftresize",t)})),e.right&&i.allowRightResize&&(e.rightDropHandle=t("<div class='layout-drophandle-right'></div>"),e.layout.append(e.rightDropHandle),e.rightDropHandle&&e.rightDropHandle.show(),e.rightDropHandle.mousedown(function(t){e._start("rightresize",t)})),e.top&&i.allowTopResize&&(e.topDropHandle=t("<div class='layout-drophandle-top'></div>"),e.layout.append(e.topDropHandle),e.topDropHandle.show(),e.topDropHandle.mousedown(function(t){e._start("topresize",t)})),e.bottom&&i.allowBottomResize&&(e.bottomDropHandle=t("<div class='layout-drophandle-bottom'></div>"),e.layout.append(e.bottomDropHandle),e.bottomDropHandle.show(),e.bottomDropHandle.mousedown(function(t){e._start("bottomresize",t)})),e.draggingxline=t("<div class='layout-dragging-xline'></div>"),e.draggingyline=t("<div class='layout-dragging-yline'></div>"),e.layout.append(e.draggingxline).append(e.draggingyline)},_setDropHandlePosition:function(){var t=this,e=this.options;t.leftDropHandle&&t.leftDropHandle.css({left:parseInt(t.left.outerWidth())+e.space,top:t.middleTop,width:e.dropVal,height:t.middleHeight}),t.rightDropHandle&&t.rightDropHandle.css({right:parseInt(t.right.outerWidth())+e.space,top:t.middleTop,width:e.dropVal,height:t.middleHeight}),t.topDropHandle&&t.topDropHandle.css({top:t.top.outerHeight()+parseInt(t.top.css("top")),width:t.top.outerWidth(),height:e.dropVal}),t.bottomDropHandle&&t.bottomDropHandle.css({top:parseInt(t.bottom.css("top"))-e.space,width:t.bottom.outerWidth(),height:e.dropVal})},_onResize:function(){var e=this,i=this.options,n=e.layout.height(),o=0,a=t(window).height(),r=null;if("string"==typeof i.height&&i.height.indexOf("%")>0){var l=e.layout.parent();i.inWindow||"body"==l[0].tagName.toLowerCase()?(r=a,r-=parseInt(t("body").css("paddingTop")),r-=parseInt(t("body").css("paddingBottom"))):r=l.outerHeight(),o=r*parseFloat(i.height)*.01,(i.inWindow||"body"==l[0].tagName.toLowerCase())&&(o-=e.layout.offset().top-parseInt(t("body").css("paddingTop")))}else o=parseInt(i.height);if(o+=i.heightDiff,e.layout.height(o),e.layoutHeight=e.layout.height(),e.middleWidth=e.layout.width(),e.middleHeight=e.layout.height(),e.top&&(e.middleHeight-=e.top.outerHeight(),e.middleHeight-=i.space),e.bottom&&(e.middleHeight-=e.bottom.outerHeight(),e.middleHeight-=i.space),e.hasBind("heightChanged")&&e.layoutHeight!=n&&e.trigger("heightChanged",[{layoutHeight:e.layoutHeight,diff:e.layoutHeight-n,middleHeight:e.middleHeight}]),e.center){e.centerWidth=e.middleWidth,e.left?(i.allowLeftResize&&i.inIframe?e.centerWidth-=i.dropVal:(e.centerWidth-=i.space,e.centerWidth-=i.dropVal),e.isLeftCollapse?e.centerWidth-=e.leftCollapse.outerWidth():e.centerWidth-=e.left.outerWidth()):e.centerWidth-=i.space,e.right?(i.allowRightResize&&i.inIframe?e.centerWidth-=i.dropVal:(e.centerWidth-=i.space,e.centerWidth-=i.dropVal),e.isRightCollapse?e.centerWidth-=e.rightCollapse.outerWidth():e.centerWidth-=e.right.outerWidth()):e.centerWidth-=i.space,e.centerLeft=0,e.left&&(i.allowLeftResize&&i.inIframe?e.centerLeft+=i.dropVal:(e.centerLeft+=i.space,e.centerLeft+=i.dropVal),e.isLeftCollapse?e.centerLeft+=e.leftCollapse.outerWidth():e.centerLeft+=e.left.outerWidth()),e.center.css({left:e.centerLeft}),e.center.outerWidth(e.centerWidth).outerHeight(e.middleHeight);var s=e.middleHeight;e.center.header&&(s-=e.center.header.outerHeight()),e.center.content.outerHeight(s)}e.left&&(e.leftCollapse.outerHeight(e.middleHeight),e.left.outerHeight(e.middleHeight),e.left.content.outerHeight(e.middleHeight-e.left.header.outerHeight())),e.right&&(e.rightCollapse.outerHeight(e.middleHeight),e.right.outerHeight(e.middleHeight),e.right.content.outerHeight(e.middleHeight-e.right.header.outerHeight())),e.bottom&&(e.bottomTop=e.layoutHeight-e.bottom.outerHeight(),e.bottom.css({top:e.bottomTop})),e._setDropHandlePosition()},preventEvent:function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1},_start:function(e,i){var n=this,o=this.options;if(n.dragtype=e,
n.maxLeftWidth=n.layout.width()-2*o.space,n.maxRightWidth=n.layout.width()-2*o.space,"leftresize"==e)o.leftWidth?n.maxLeftWidth=o.leftWidth:(n.right&&(n.maxLeftWidth-=n.right.outerWidth(),n.maxLeftWidth-=o.dropVal),n.center&&(n.maxLeftWidth-=200)),n.xresize={startX:i.pageX},i.pageX>=n.leftDropHandle.offset().left&&(n.xresize={startX:n.leftDropHandle.offset().left}),o.minLeftWidth&&i.pageX<n.left.offset().left+o.minLeftWidth?n.draggingyline.css({left:o.minLeftWidth+n.left.offset().left,top:n.middleTop,height:n.middleHeight}).show():n.maxLeftWidth&&i.pageX>n.left.offset().left+n.maxLeftWidth?n.draggingyline.css({left:n.maxLeftWidth+n.left.offset().left,top:n.middleTop,height:n.middleHeight}).show():n.draggingyline.css({left:i.pageX-n.left.offset().left+o.dropVal,top:n.middleTop,height:n.middleHeight}).show();else if("rightresize"==e)o.rightWidth?n.maxRightWidth=o.rightWidth:(n.left&&(n.maxRightWidth-=n.left.outerWidth(),n.maxRightWidth-=o.dropVal),n.center&&(n.maxRightWidth-=200)),n.xresize={startX:i.pageX},i.pageX>=n.rightDropHandle.offset().left&&i.pageX<=n.rightDropHandle.offset().left+o.dropVal&&(n.xresize={startX:n.rightDropHandle.offset().left}),o.minRightWidth&&i.pageX<n.layout.offset().left+n.layout.outerWidth()-o.minRightWidth-o.dropVal&&i.pageX>n.layout.offset().left+n.layout.outerWidth()-o.minRightWidth-o.dropVal-o.dropVal?n.draggingyline.css({left:n.layout.offset().left+n.layout.outerWidth()-o.minRightWidth-o.dropVal-o.dropVal,top:n.middleTop,height:n.middleHeight}).show():n.maxRightWidth&&i.pageX<n.layout.offset().left+n.layout.outerWidth()-n.maxRightWidth-o.dropVal&&i.pageX>n.layout.offset().left+n.layout.outerWidth()-n.maxRightWidth-o.dropVal-o.dropVal?n.draggingyline.css({left:n.layout.offset().left+n.layout.outerWidth()-n.maxRightWidth-o.dropVal-o.dropVal,top:n.middleTop,height:n.middleHeight}).show():n.draggingyline.css({left:i.pageX-n.layout.offset().left,top:n.middleTop,height:n.middleHeight}).show();else{if("topresize"!=e&&"bottomresize"!=e)return;n.yresize={startY:i.pageY},n.draggingxline.css({top:i.pageY-n.layout.offset().top,width:n.layout.width()}).show(),t("body").css("cursor","row-resize")}n.layout.lock.width(n.layout.width()),n.layout.lock.height(n.layout.height()),n.layout.lock.show(),t(document).bind("selectstart",function(){return!1}),t(document).bind("mouseup",function(){n._stop.apply(n,arguments)}),t(document).bind("mousemove",function(){n._drag.apply(n,arguments)})},_drag:function(e){var i=this,n=this.options;if(i.xresize){if("leftresize"==i.dragtype){var o=e.pageX-i.left.offset().left;i.xresize.diff=i.draggingyline.offset().left-i.xresize.startX,n.minLeftWidth&&o>=n.minLeftWidth+i.left.offset().left&&i.maxLeftWidth&&o<=i.maxLeftWidth+i.left.offset().left?i.draggingyline.css({left:o}):n.minLeftWidth&&o<n.minLeftWidth+i.left.offset().left?i.draggingyline.css({left:n.minLeftWidth+i.left.offset().left}):i.maxLeftWidth&&o>i.maxLeftWidth+i.left.offset().left&&i.draggingyline.css({left:i.maxLeftWidth+i.left.offset().left})}else if("rightresize"==i.dragtype){var o=e.pageX-i.layout.offset().left;i.xresize.diff=i.draggingyline.offset().left-i.xresize.startX,i.maxRightWidth&&o>=i.layout.offset().left+i.layout.outerWidth()-i.maxRightWidth-n.dropVal&&n.minLeftWidth&&o<=i.layout.offset().left+i.layout.outerWidth()-n.minRightWidth-n.dropVal-n.dropVal?i.draggingyline.css({left:o}):n.minRightWidth&&o>i.layout.offset().left+i.layout.outerWidth()-n.minRightWidth-n.dropVal-n.dropVal?i.draggingyline.css({left:i.layout.offset().left+i.layout.outerWidth()-n.minRightWidth-n.dropVal-n.dropVal}):i.maxRightWidth&&o<i.layout.offset().left+i.layout.outerWidth()-i.maxRightWidth-n.dropVal-n.dropVal&&i.draggingyline.css({left:i.layout.offset().left+i.layout.outerWidth()-i.maxRightWidth-n.dropVal-n.dropVal})}t("body").css("cursor","col-resize")}else i.yresize&&(i.yresize.diff=e.pageY-i.yresize.startY,i.draggingxline.css({top:e.pageY-i.layout.offset().top}),t("body").css("cursor","row-resize"));return i.preventEvent(e)},_stop:function(e){var i,n=this;this.options;n.xresize&&void 0!==n.xresize.diff?(i=n.xresize.diff,"leftresize"==n.dragtype?(n.leftWidth+=n.xresize.diff,n.left.outerWidth(n.leftWidth),n.center?n.center.outerWidth(n.center.outerWidth()-n.xresize.diff).css({left:parseInt(n.center.css("left"))+n.xresize.diff}):n.right&&n.right.outerWidth(n.left.outerWidth()-n.xresize.diff).css({left:parseInt(n.right.css("left"))+n.xresize.diff})):"rightresize"==n.dragtype&&(n.rightWidth-=n.xresize.diff,n.right.outerWidth(n.rightWidth).css({left:parseInt(n.right.css("left"))+n.xresize.diff}),n.center?n.center.outerWidth(n.center.outerWidth()+n.xresize.diff):n.left&&n.left.outerWidth(n.left.outerWidth()+n.xresize.diff))):n.yresize&&void 0!==n.yresize.diff&&(i=n.yresize.diff,"topresize"==n.dragtype?(n.top.outerHeight(n.top.outerHeight()+n.yresize.diff),n.middleTop+=n.yresize.diff,n.middleHeight-=n.yresize.diff,n.left&&(n.left.css({top:n.middleTop}).outerHeight(n.middleHeight),n.leftCollapse.css({top:n.middleTop}).outerHeight(n.middleHeight)),n.center&&n.center.css({top:n.middleTop}).outerHeight(n.middleHeight),n.right&&(n.right.css({top:n.middleTop}).outerHeight(n.middleHeight),n.rightCollapse.css({top:n.middleTop}).outerHeight(n.middleHeight))):"bottomresize"==n.dragtype&&(n.bottom.outerHeight(n.bottom.outerHeight()-n.yresize.diff),n.middleHeight+=n.yresize.diff,n.bottomTop+=n.yresize.diff,n.bottom.css({top:n.bottomTop}),n.left&&(n.left.outerHeight(n.middleHeight),n.leftCollapse.outerHeight(n.middleHeight)),n.center&&n.center.outerHeight(n.middleHeight),n.right&&(n.right.outerHeight(n.middleHeight),n.rightCollapse.outerHeight(n.middleHeight)))),n.trigger("endResize",[{direction:n.dragtype?n.dragtype.replace(/resize/,""):"",diff:i},e]),n._setDropHandlePosition(),n.draggingxline.hide(),n.draggingyline.hide(),n.xresize=n.yresize=n.dragtype=!1,n.layout.lock.hide(),(t.browser.msie||t.browser.safari)&&t("body").unbind("selectstart"),t(document).unbind("mousemove",n._drag),t(document).unbind("mouseup",n._stop),t("body").css("cursor","")}})}(jQuery),function(t){t.lxlMenu=function(){return t.lxlui.run.call(null,"lxlMenu",arguments)},t.lxlDefaults.Menu={width:120,top:0,left:0,items:null},t.lxlMethos.Menu={},t.lxlui.controls.Menu=function(e){t.lxlui.controls.Menu.base.constructor.call(this,null,e)},t.lxlui.controls.Menu.lxlExtend(t.lxlui.core.UIComponent,{__getType:function(){return"Menu"},__idPrev:function(){return"Menu"},_extendMethods:function(){return t.lxlMethos.Menu},_render:function(){var e=this,i=this.options;e.menuItemCount=0,e.menus={},e.menu=e.createMenu(),e.element=e.menu[0],e.menu.css({top:i.top,left:i.left,width:i.width}),i.items&&t(i.items).each(function(t,i){e.addItem(i)}),t(document).bind("click.menu",function(){for(var t in e.menus){var i=e.menus[t];if(!i)return;i.hide()}}),e.set(i)},show:function(e,i){var n=this;this.options;void 0===i&&(i=n.menu),e&&void 0!==e.left&&i.css({left:e.left}),e&&void 0!==e.top&&i.css({top:e.top}),i.show(),t(".menu[lxluiid!='"+i.attr("lxluiid")+"']").each(function(){t(this).remove()})},hide:function(t){var e=this;this.options;void 0===t&&(t=e.menu),e.hideAllSubMenu(t),t.hide()},toggle:function(){var t=this;this.options;t.menu.toggle()},removeItem:function(e){var i=this;this.options;t("> .menu-item[menuitemid="+e+"]",i.menu.items).remove()},setEnabled:function(e){var i=this;this.options;t("> .menu-item[menuitemid="+e+"]",i.menu.items).removeClass("menu-item-disable")},setDisabled:function(e){var i=this;this.options;t("> .menu-item[menuitemid="+e+"]",i.menu.items).addClass("menu-item-disable")},isEnable:function(e){var i=this;this.options;return!t("> .menu-item[menuitemid="+e+"]",i.menu.items).hasClass("menu-item-disable")},getItemCount:function(){var e=this;this.options;return t("> .menu-item",e.menu.items).length},addItem:function(e,i){var n=this,o=this.options;if(e){if(void 0===i&&(i=n.menu),e.line)return void i.items.append('<div class="menu-item-line"></div>');var a=t('<div class="menu-item"><div class="menu-item-text"></div> </div>'),r=t("> .menu-item",i.items).length;if(i.items.append(a),a.attr("lxluimenutemid",++n.menuItemCount),e.id&&a.attr("menuitemid",e.id),e.text&&t(">.menu-item-text:first",a).html(e.text),e.icon&&a.prepend('<div class="menu-item-icon icon-'+e.icon+'"></div>'),(e.disable||e.disabled)&&a.addClass("menu-item-disable"),e.children){a.append('<div class="menu-item-arrow"></div>');var l=n.createMenu(a.attr("lxluimenutemid"));n.menus[a.attr("lxluimenutemid")]=l,l.width(o.width),l.hover(null,function(){l.showedSubMenu||n.hide(l)}),t(e.children).each(function(){n.addItem(this,l)})}e.click&&a.click(function(){t(this).hasClass("menu-item-disable")||e.click(e,r)}),e.dblclick&&a.dblclick(function(){t(this).hasClass("menu-item-disable")||e.dblclick(e,r)});var s=t("> .menu-over:first",i);a.hover(function(){if(!t(this).hasClass("menu-item-disable")){var o=t(this).offset().top,a=o-i.offset().top;if(s.css({top:a}),n.hideAllSubMenu(i),e.children){var r=t(this).attr("lxluimenutemid");if(!r)return;n.menus[r]&&(n.show({top:o,left:t(this).offset().left+t(this).width()-5},n.menus[r]),i.showedSubMenu=!0)}}},function(){if(!t(this).hasClass("menu-item-disable")){t(this).attr("lxluimenutemid");if(e.children){if(!t(this).attr("lxluimenutemid"))return}}})}},hideAllSubMenu:function(e){var i=this;this.options;void 0===e&&(e=i.menu),t("> .menu-item",e.items).each(function(){if(t("> .menu-item-arrow",this).length>0){var e=t(this).attr("lxluimenutemid");if(!e)return;i.menus[e]&&i.hide(i.menus[e])}}),e.showedSubMenu=!1},createMenu:function(e){var i,n=this;this.options;i='<div class="menu-yline"></div><div class="menu-over"><div class="menu-over-l"></div><div class="menu-over-r"></div></div><div class="menu-inner"></div>';var o=t('<div class="menu" style="display:none">'+i+"</div>");return e&&o.attr("lxluiparentmenuitemid",e),o.items=t("> .menu-inner:first",o),o.appendTo("body"),o.hover(null,function(){o.showedSubMenu||t("> .menu-over:first",o).css({top:-24})}),e?n.menus[e]=o:n.menus[0]=o,o}})}(jQuery),function(t){t.fn.lxlResizable=function(){return t.lxlui.run.call(this,"lxlResizable",arguments,{idAttrName:"lxluiresizableid",hasElement:!1,propertyToElemnt:"target"})},t.fn.lxlResizableMgr=function(){return t.lxlui.run.call(this,"lxlResizableMgr",arguments,{idAttrName:"lxluiresizableid",hasElement:!1,propertyToElemnt:"target"})},t.lxlDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2e3,maxHeight:2e3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(){},onResize:function(){},onStopResize:function(){},onEndResize:null},t.lxlui.controls.Resizable=function(e){t.lxlui.controls.Resizable.base.constructor.call(this,null,e)},t.lxlui.controls.Resizable.lxlExtend(t.lxlui.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var e=this,i=this.options;e.target=t(i.target),e.set(i),e.target.bind("mousedown.resizable",function(t){i.disabled||(e.dir&&e._start(t),this.setCapture&&this.setCapture(!1),t.preventDefault())}).bind("mousemove.resizable",function(n){if(!i.disabled&&(e.dir=e._getDir(n),e.dir?e.target.css("cursor",e.dir+"-resize"):e.target.css("cursor").indexOf("-resize")>0&&e.target.css("cursor","default"),i.target.lxluidragid)){var o=t.lxlui.get(i.target.lxluidragid);o&&e.dir?o.set("disabled",!0):o&&o.set("disabled",!1)}}).bind("mouseup.resizable",function(){this.releaseCapture&&this.releaseCapture()})},_rendered:function(){this.options.target.lxluiresizableid=this.id},_getDir:function(e){var i=this,n=this.options,o="",a=i.target.offset(),r=i.target.width(),l=i.target.height(),s=n.scope,d=e.pageX||e.clientX,c=e.pageY||e.clientY;return c>=a.top&&c<a.top+s?o+="n":c<=a.top+l&&c>a.top+l-s&&(o+="s"),d>=a.left&&d<a.left+s?o+="w":d<=a.left+r&&d>a.left+r-s&&(o+="e"),"all"==n.handles||""===o?o:-1!=t.inArray(o,i.handles)?o:""},_setHandles:function(t){t&&(this.handles=t.replace(/(\s*)/g,"").split(","))},_createProxy:function(){var e=this;e.proxy=t('<div class="resizable"></div>'),e.proxy.width(e.target.width()-2).height(e.target.height()-2),e.proxy.attr("resizableid",e.id).appendTo("body")},_removeProxy:function(){var t=this;t.proxy&&(t.proxy.remove(),t.proxy=null)},_start:function(e){var i=this;this.options;i._createProxy(),i.proxy.css({left:i.target.offset().left,top:i.target.offset().top,position:"absolute"}),i.current={dir:i.dir,left:i.target.offset().left,top:i.target.offset().top,startX:e.pageX||e.clientX,startY:e.pageY||e.clientY,width:i.target.width(),height:i.target.height()},t(document).bind("selectstart.resizable",function(){return!1}),t(document).bind("mouseup.resizable",function(){i._stop.apply(i,arguments)}),t(document).bind("mousemove.resizable",function(){i._drag.apply(i,arguments)}),i.proxy.show(),i.trigger("startResize",[i.current,e])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(t){var e=this;this.options;if(e.current&&e.proxy){e.proxy.css("cursor",""===e.current.dir?"default":e.current.dir+"-resize");var i=t.pageX||t.clientX,n=t.pageY||t.clientY;e.current.diffX=i-e.current.startX,e.current.diffY=n-e.current.startY,e._applyResize(e.proxy),e.trigger("resize",[e.current,t])}},_stop:function(e){var i=this;this.options;i.hasBind("stopResize")?!1!==i.trigger("stopResize",[i.current,e])&&i._applyResize():i._applyResize(),i._removeProxy(),i.trigger("endResize",[i.current,e]),t(document).unbind("selectstart.resizable"),t(document).unbind("mousemove.resizable"),t(document).unbind("mouseup.resizable")},_applyResize:function(e){var i=this,n=this.options,o={left:i.current.left,top:i.current.top,width:i.current.width,height:i.current.height},a=!1;e||(e=i.target,a=!0,isNaN(parseInt(i.target.css("top")))?o.top=0:o.top=parseInt(i.target.css("top")),isNaN(parseInt(i.target.css("left")))?o.left=0:o.left=parseInt(i.target.css("left"))),t.inArray(i.current.dir,i.changeBy.l)>-1?(o.left+=i.current.diffX,i.current.diffLeft=i.current.diffX):a&&delete o.left,t.inArray(i.current.dir,i.changeBy.t)>-1?(o.top+=i.current.diffY,i.current.diffTop=i.current.diffY):a&&delete o.top,t.inArray(i.current.dir,i.changeBy.w)>-1?(o.width+=(-1==i.current.dir.indexOf("w")?1:-1)*i.current.diffX,i.current.newWidth=o.width):a&&delete o.width,t.inArray(i.current.dir,i.changeBy.h)>-1?(o.height+=(-1==i.current.dir.indexOf("n")?1:-1)*i.current.diffY,i.current.newHeight=o.height):a&&delete o.height,a&&n.animate?e.animate(o):e.css(o)}})}(jQuery),function(t){t.fn.lxlTab=function(){return t.lxlui.run.call(this,"lxlTab",arguments)},t.fn.lxlTabMgr=function(){return t.lxlui.run.call(this,"lxlTabMgr",arguments)},t.lxlDefaults.Tab={height:"100%",heightDiff:0,changeHeightOnResize:!0,contextmenu:!0,dblClickToClose:!0,dragToMove:!1},t.lxlMethos.Tab={},t.lxlui.controls.Tab=function(e,i){t.lxlui.controls.Tab.base.constructor.call(this,e,i)},t.lxlui.controls.Tab.lxlExtend(t.lxlui.core.UIComponent,{__getType:function(){return"Tab"},__idPrev:function(){return"Tab"},_extendMethods:function(){return t.lxlMethos.Tab},_render:function(){var e=this,i=this.options;i.height&&(e.makeFullHeight=!0),e.tab=t(this.element),i.contextmenu&&t.lxlMenu&&(e.tab.menu=t.lxlMenu({items:[{text:"关闭",id:"close",click:function(){e._contextMenuItemClick.apply(e,arguments)}},{text:"关闭其他",id:"closeother",click:function(){e._contextMenuItemClick.apply(e,arguments)}},{text:"全部关闭",id:"closeall",click:function(){e._contextMenuItemClick.apply(e,arguments)}},{text:"新窗口打开",id:"newwin",click:function(){e._contextMenuItemClick.apply(e,arguments)}},{text:"刷新",id:"reload",click:function(){e._contextMenuItemClick.apply(e,arguments)}}]})),e.tab.addClass("tab"),e.tab.content=t('<div class="tab-content"></div>'),t("> div",e.tab).appendTo(e.tab.content),e.tab.content.appendTo(e.tab),e.tab.morebox=t('<div class="tab-morebox"><ul></ul></div>'),e.tab.morebox.prependTo(e.tab),e.tab.morebox.ul=t("> ul",e.tab.morebox),e.tab.links=t('<div class="tab-links"><ul style="left: 0px; top: 0px;"></ul><div class="tab-links-left"></div><div class="tab-links-right"></div><div class="tab-links-more"></div></div>'),e.tab.links.prependTo(e.tab),e.tab.links.ul=t("> ul",e.tab.links),e.tab.links.left=t(".tab-links-left",e.tab.links),e.tab.links.right=t(".tab-links-right",e.tab.links),e.tab.links.more=t(".tab-links-more",e.tab.links),e.tab.links.left.hoverClass("tab-links-left-over").click(function(){t(this).hasClass("tab-links-left-invalid")||e.moveToPrevTabItem()}),e.tab.links.right.hoverClass("tab-links-right-over").click(function(){t(this).hasClass("tab-links-right-invalid")||e.moveToNextTabItem()}),e.tab.links.more.hoverClass("tab-links-more-over").click(function(){return e.tab.morebox.show(),!1}),t(document).click(function(){e.tab.morebox.hide()});var n=t("> div[selected=true]",e.tab.content),o=n.length>0;e.selectedTabId=n.attr("tabid"),t("> div",e.tab.content).each(function(i,n){var a=t('<li><a></a><div class="tab-links-item-left"></div><div class="tab-links-item-right"></div></li>'),r=t('<li><a href="javascript:;"></a></li>'),l=t(this);l.attr("title")&&(t("> a",a).html(l.attr("title")),t("> a",r).html(l.attr("title")),l.removeAttr("title")),l.attr("icon")&&(t("> a",a).addClass(l.attr("icon")+"ico"),l.removeAttr("icon"));var s=l.attr("tabid");if(void 0===s&&(s=e.getNewTabid(),l.attr("tabid",s)),a.attr("tabid",s),r.attr("tabid",s),l.attr("selected")&&(e.selectedTabId=s,r.addClass("selected")),o||0!==i||(e.selectedTabId=s),l.attr("showClose")&&a.append("<div class='tab-links-item-close'></div>"),e.tab.links.ul.append(a),e.tab.morebox.ul.append(r),l.hasClass("tab-content-item")||l.addClass("tab-content-item"),l.find("iframe").length>0){var d=t("iframe:first",l);if("complete"!=d[0].readyState){0===l.find("div.tab-loading:first").length&&l.prepend("<div class='tab-loading' style='display:block;'></div>");var c=t("div.tab-loading:first",l);d.bind("load.tab",function(){c.hide()})}}}),e.currentIndex=e.getIndexByTabId(e.selectedTabId),e.setTabItem(),e.selectTabItem(e.selectedTabId),e.tab.resize(function(){setTimeout(function(){e.selectTabItem(e.selectedTabId)},100)}),i.height&&("string"==typeof i.height&&i.height.indexOf("%")>0?(e._onResize(),i.changeHeightOnResize&&t(window).resize(function(){e._onResize.call(e)})):e.setHeight(i.height)),e.makeFullHeight&&e.setContentHeight(),e.set(i)},addTabItem:function(e){var i=this,n=this.options,o=e.tabid;void 0===o&&(o=i.getNewTabid());var a=e.url,r=e.content,l=e.text,s=e.showClose,d=e.height;if(i.getTabItem(o).length>0)return i.selectTabItem(o),void i.reload(o,a);var c=t("<li><a></a><div class='tab-links-item-left'></div><div class='tab-links-item-right'></div><div class='tab-links-item-close'></div></li>"),h=t("<li tabid="+o+'><a href="javascript:;"></a></li>');t("> a",h).html(l),i.tab.morebox.ul.append(h);var u=t("<div class='tab-content-item'><div class='tab-loading' style='display:block;'></div><iframe frameborder='0'></iframe></div>"),g=t("div.tab-loading:first",u),p=t("iframe:first",u);if(i.makeFullHeight){var f=i.tab.height()-i.tab.links.outerHeight();u.height(f)}c.attr("tabid",o),u.attr("tabid",o),a?p.attr("name",o).attr("id",o).attr("src",a).bind("load.tab",function(){g.hide(),e.callback&&e.callback()}):(p.remove(),g.remove()),r?u.html(r):e.target&&u.append(e.target),void 0===s&&(s=!0),!1===s&&t(".tab-links-item-close",c).remove(),void 0===l&&(l=o),d&&u.height(d),t("a",c).text(l),i.tab.links.ul.append(c),i.tab.content.append(u),i.setTabItem(),i.selectTabItem(o),n.dragToMove&&t.fn.lxlDrag&&(i.drags=i.drags||[],c.each(function(){i.drags.push(i._applyDrag(this))}))},removeTabItem:function(t){var e=this,i=(this.options,0);e.getTabItem(t).hasClass("tab-selected")&&e.getTabItem(t).prev().index()>=0&&(i=e.getTabItem(t).prev().attr("tabid")),e.getTabItem(t).remove(),e.getTabMoreItem(t).remove(),e.getTabPanel(t).remove(),e.selectTabItem(i)},selectTabItem:function(t){var e=this;e.getTabItem(t).addClass("tab-selected").siblings().removeClass("tab-selected"),e.getTabMoreItem(t).addClass("selected").siblings().removeClass("selected"),e.getTabPanel(t).show().siblings().hide(),e.selectedTabId=t,e.moveToCurTabItem(t)},setTabItem:function(){var e=this;e.getTabItems().each(function(){var i=t(this);i.hoverClass("tab-hover").unbind("click").click(function(){e.selectTabItem(t(this).attr("tabid"))}).unSelect(),e.tab.menu&&i.bind("contextmenu",function(n){return e.actionTabid=i.attr("tabid"),e.tab.menu.show({top:n.pageY,left:n.pageX}),0===t(".tab-links-item-close",this).length?e.tab.menu.setDisabled("close"):e.tab.menu.setEnabled("close"),!1}),t(".tab-links-item-close",i).hoverClass("tab-links-item-close-over").unbind("click").click(function(){e.removeTabItem(i.attr("tabid"))})}),e.getTabMoreItems().each(function(){t(this).unbind("click").click(function(){e.selectTabItem(t(this).attr("tabid"))}).unSelect()})},setTabButton:function(){var t=this,e=t.getTabsWidth(t.getTabItems());t.getScrollBarWidth()>=e?(t.tab.links.ul.css({left:"0px",margin:"0px"}),t.tab.links.left.hide(),t.tab.links.right.hide()):(t.tab.links.ul.css({margin:"0 17px"}),t.tab.links.left.show().removeClass("tab-links-left-invalid"),t.tab.links.right.show().removeClass("tab-links-right-invalid"),t.getLeft()>=0?t.tab.links.left.addClass("tab-links-left-invalid"):t.getLeft()<=t.getScrollBarWidth()-e&&t.tab.links.right.addClass("tab-links-right-invalid"))},setTabItemText:function(e,i){t("> li[tabid="+e+"] a",this.tab.links.ul).text(i)},moveToPrevTabItem:function(){var t=this,e=t.getVisibleStart();e>0&&t.scrollTab(-t.getTabsIntervalWidth(0,e-1))},moveToNextTabItem:function(){var t=this,e=t.getVisibleEnd();e<t.getTabItems().size()&&t.scrollTab(-t.getTabsIntervalWidth(0,e+1)+t.getScrollBarWidth())},moveToCurTabItem:function(t){var e=this;e.currentIndex=e.getIndexByTabId(t);var i=e.getTabsWidth(e.getTabItems());i<=e.getScrollBarWidth()?e.scrollTab(0):e.getLeft()<e.getScrollBarWidth()-i?e.scrollTab(e.getScrollBarWidth()-i):e.currentIndex<e.getVisibleStart()?e.scrollTab(-e.getTabsIntervalWidth(0,e.currentIndex)):e.currentIndex>=e.getVisibleEnd()&&e.scrollTab(e.getScrollBarWidth()-e.getTabItems().eq(e.currentIndex).outerWidth(!0)-e.getTabsIntervalWidth(0,e.currentIndex))},scrollTab:function(t){var e=this;e.tab.links.ul.animate({left:t+"px"},200,function(){e.setTabButton()})},getTabsWidth:function(e){var i=0;return e.each(function(){i+=t(this).outerWidth(!0)}),i},getTabsIntervalWidth:function(t,e){var i=this;return i.getTabsWidth(i.getTabItems().slice(t,e))},getTab:function(t){var e=this,i=e.getIndexByTabId(t);if(i>=0)return e.getTabItems().eq(i)},getLeft:function(){return this.tab.links.ul.position().left},getScrollBarWidth:function(){return this.tab.links.width()-53},getVisibleStart:function(){for(var t=this,e=t.getLeft(),i=0,n=t.getTabItems(),o=0;o<n.size();o++){if(i+e>=0)return o;i+=n.eq(o).outerWidth(!0)}return 0},getVisibleEnd:function(){for(var t=this,e=t.getLeft(),i=0,n=t.getTabItems(),o=0;o<n.size();o++)if((i+=n.eq(o).outerWidth(!0))+e>t.getScrollBarWidth())return o;return n.size()},getIndexByTabId:function(e){if(!e)return 0;var i=0;return this.getTabItems().each(function(n){if(t(this).attr("tabid")==e)return void(i=n)}),i},getTabItem:function(e){return t("> li[tabid="+e+"]",this.tab.links.ul)},getTabItems:function(){return t("> li",this.tab.links.ul)},getTabMoreItem:function(e){return t("> li[tabid="+e+"]",this.tab.morebox.ul)},getTabMoreItems:function(){return t("> li",this.tab.morebox.ul)},getTabPanel:function(e){return t("> .tab-content-item[tabid="+e+"]",this.tab.content)},getTabPanels:function(){return t("> .tab-content-item",this.tab.content)},getTabItemCount:function(){return t("> li",this.tab.links.ul).length},getNewTabid:function(){var t=this;return t.newtabidcount=t.newtabidcount||0,"tabitem"+ ++t.newtabidcount},getSelectedIframe:function(){return t("iframe[id="+this.selectedTabId+"]")},getSelectedTabItemID:function(){return t("> li.tab-selected",this.tab.links.ul).attr("tabid")},removeSelectedTabItem:function(){this.removeTabItem(this.getSelectedTabItemID())},addHeight:function(t){this.setHeight(this.tab.height()+t)},setHeight:function(t){this.tab.height(t),this.setContentHeight()},setContentHeight:function(){var t=this,e=t.tab.height()-t.tab.links.outerHeight();t.tab.content.height(e),t.getTabPanels().height(e)},removeOther:function(t){var e=this,i=e.getIndexByTabId(t)||e.currentIndex;i>0?(e.getTabItems().not(":eq("+i+")").filter(":gt(0)").remove(),e.getTabMoreItems().not(":eq("+i+")").filter(":gt(0)").remove(),e.getTabPanels().not(":eq("+i+")").filter(":gt(0)").remove(),e.selectedTabId=e.getTabItems().eq(1).attr("tabid"),e.selectTabItem(e.selectedTabId)):e.removeAll()},removeAll:function(){var t=this;t.getTabItems().filter(":gt(0)").remove(),t.getTabMoreItems().filter(":gt(0)").remove(),t.getTabPanels().filter(":gt(0)").remove(),t.selectedTabId=t.getTabItems().eq(0).attr("tabid"),t.selectTabItem(t.selectedTabId)},reload:function(e,i){var n=this,o=(this.options,n.getTabPanel(e)),a=t("div.tab-loading:first",o),r=t("iframe:first",o),l=r.attr("src"),s=!1;i&&i!=l?(l=i,s=!0):i||(s=!0),s&&(a.show(),r.unbind("load.tab").attr("src",l).bind("load.tab",function(){a.hide()}))},_contextMenuItemClick:function(t){var e=this;this.options;if(t.id&&e.actionTabid)switch(t.id){case"close":e.removeTabItem(e.actionTabid),e.actionTabid=null;break;case"closeother":e.removeOther(e.actionTabid);break;case"closeall":e.removeAll(),e.actionTabid=null;break;case"reload":e.selectTabItem(e.actionTabid),e.reload(e.actionTabid);break;case"newwin":window.open(e.getSelectedIframe().attr("src"))}},_applyDrag:function(e){var i=this;this.options;return i.droptip=i.droptip||t("<div class='drag-droptip' style='display:none'><div class='drop-move-up'></div><div class='drop-move-down'></div></div>").appendTo("body"),t(e).lxlDrag({revert:!0,animate:!1,proxy:function(){var e=t(this).find("a").html();return i.dragproxy=t("<div class='drag-proxy' style='display:none'><div class='drop-icon drop-no'></div></div>").appendTo("body"),i.dragproxy.append(e),i.dragproxy},onRendered:function(){this.set("cursor","pointer")},onStartDrag:function(i,n){if(!t(e).hasClass("tab-selected"))return!1;if(2==n.button)return!1;var o=n.srcElement||n.target;return!t(o).hasClass("tab-links-item-close")&&void 0},onDrag:function(e,n){null==i.dropIn&&(i.dropIn=-1);var o=i.tab.links.ul.find(">li"),a=o.index(e.target);o.each(function(e,o){if(a!=e){var r=e>a;if(-1==i.dropIn||i.dropIn==e){var l=t(this).offset(),s={top:l.top,bottom:l.top+t(this).height(),left:l.left-10,right:l.left+10};r&&(s.left+=t(this).width(),s.right+=t(this).width());var d=n.pageX||n.screenX,c=n.pageY||n.screenY;d>s.left&&d<s.right&&c>s.top&&c<s.bottom?(i.droptip.css({left:s.left+5,top:s.top-9}).show(),i.dropIn=e,i.dragproxy.find(".drop-icon").removeClass("drop-no").addClass("drop-yes")):(i.dropIn=-1,i.droptip.hide(),i.dragproxy.find(".drop-icon").removeClass("drop-yes").addClass("drop-no"))}}})},onStopDrag:function(e,n){if(i.dropIn>-1){var o=t(e.target).attr("tabid"),a=i.tab.links.ul.find(">li:eq("+i.dropIn+")").attr("tabid");setTimeout(function(){o=i.getTabItem(o),a=i.getTabItem(a),i.getTabItems().index(o)<i.getTabItems().index(a)?a.after(o):a.before(o)},0),i.dropIn=-1,i.dragproxy.remove()}i.droptip.hide(),this.set("cursor","default")}})},_setDragToMove:function(e){if(t.fn.lxlDrag){var i=this;if(e){if(i.drags)return;i.drags=i.drags||[],i.getTabItems().each(function(){i.drags.push(i._applyDrag(this))})}}},_onResize:function(){var e=this,i=this.options;if(!i.height||"string"!=typeof i.height||-1==i.height.indexOf("%"))return!1;if("body"==e.tab.parent()[0].tagName.toLowerCase()){var n=t(window).height();n-=parseInt(e.tab.parent().css("paddingTop")),n-=parseInt(e.tab.parent().css("paddingBottom")),e.height=i.heightDiff+n*parseFloat(e.height)*.01}else e.height=i.heightDiff+e.tab.parent().height()*parseFloat(i.height)*.01;e.setHeight(e.height)}})}(jQuery),function(t){t.fn.lxlTabs=function(){return t.lxlui.run.call(this,"lxlTabs",arguments)},t.fn.lxlTabsMgr=function(){return t.lxlui.run.call(this,"lxlTabsMgr",arguments)},t.lxlDefaults.Tabs={width:"100%",height:"auto",eventType:"click",currentIndex:0,ajaxClass:"ajaxload",skin:"default",showFooter:!0,nompb:!1},t.lxlMethos.Tabs={},t.lxlui.controls.Tabs=function(e,i){t.lxlui.controls.Tabs.base.constructor.call(this,e,i)},t.lxlui.controls.Tabs.lxlExtend(t.lxlui.core.UIComponent,{__getType:function(){return"Tabs"},__idPrev:function(){return"Tabs"},_extendMethods:function(){return t.lxlMethos.Tabs},_render:function(){var e=this,i=this.options;e.tabs=t(e.element),i.skin&&e.tabs.addClass(i.skin),i.nompb&&e.tabs.css({margin:0,padding:0,border:0}),e.tabs.header=t("> .tabsHeader",e.tabs),e.tabs.items=t("> .tabsHeaderContent > ul li",e.tabs.header),e.tabs.content=t("> .tabsContent",e.tabs),e.tabs.panels=t("> *",e.tabs.content),e.tabs.footer=t("> .tabsFooter",e.tabs),e.tabs.items.unbind().find("a").unbind(),e.tabs.items.each(function(n){i.currentIndex==n?t(this).addClass("selected"):t(this).removeClass("selected"),"hover"==i.eventType?t(this).hover(function(){e.switchTab(n)}):t(this).hoverClass("hover").click(function(){e.switchTab(n)}),t("a",this).each(function(){t(this).hasClass(i.ajaxClass)&&t(this).click(function(t){var i=e.tabs.panels.eq(n);this.href&&!i.attr("loaded")&&i.html('<div class="tabsloading"></div>').load(this.href,function(){i.attr("loaded",!0)}),t.preventDefault()})})}),i.showFooter||e.tabs.footer.remove(),"default"==i.skin&&e.tabs.footer.length>0&&e.tabs.content.css({borderRadius:0}),e.switchTab(i.currentIndex),e._onResize(),t(window).resize(function(){e._onResize()})},switchTab:function(t){var e=this,i=this.options;i.currentIndex=t,e.tabs.items.removeClass("selected").eq(t).addClass("selected"),e.tabs.panels.hide().eq(i.currentIndex).show()},_onResize:function(){var e=this,i=this.options,n=null,o=!1;"string"==typeof i.height&&-1!=i.height.indexOf("auto")?o=!0:"string"==typeof i.height&&-1!=i.height.indexOf("full")?(n=t(window).height(),i.nompb||(n-=parseInt(e.tabs.css("marginTop")),n-=parseInt(e.tabs.css("marginBottom")),n-=parseInt(e.tabs.css("borderTop")),n-=parseInt(e.tabs.css("borderBottom")))):"string"==typeof i.height&&i.height.indexOf("%")>0?(n=e.tabs.parent().height()*parseFloat(i.height)*.01,i.nompb||(n-=parseInt(e.tabs.css("marginTop")),n-=parseInt(e.tabs.css("marginBottom")),n-=parseInt(e.tabs.css("borderTop")),n-=parseInt(e.tabs.css("borderBottom")))):n=parseInt(i.height),o||(e.tabs.height(n),n-=e.tabs.header.outerHeight(),e.tabs.footer.length>0&&(n-=e.tabs.footer.outerHeight()),e.tabs.content.outerHeight(n))}})}(jQuery),function(t){function e(t){return t?t.replace(/(^\s*)|(\s*$)/g,""):t}t.fn.lxlTree=function(){return t.lxlui.run.call(this,"lxlTree",arguments)},t.fn.lxlTreeMgr=function(){return t.lxlui.run.call(this,"lxlTreeMgr",arguments)},t.lxlDefaults.Tree={url:null,urlParms:null,data:null,checkbox:!0,treeLine:!0,autoCheckboxEven:!0,enabledCompleteCheckbox:!0,single:!1,needCancel:!0,slide:!0,btnClickToToggleOnly:!0,nodeDraggable:!1,nodeDraggingRender:null,isLeaf:null,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],nodeWidth:90,statusName:"__status",idFieldName:"id",idField:null,parentIDField:null,iconClsFieldName:null,parentIDFieldName:null,topParentIDValue:0,iconFieldName:"icon",ajaxType:"post",ajaxContentType:null,render:null,selectable:null,isExpand:null,delay:null,onBeforeExpand:function(){},onContextmenu:function(){},onExpand:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeSelect:function(){},onSelect:function(){},onBeforeCancelSelect:function(){},onCancelselect:function(){},onCheck:function(){},onSuccess:function(){},onError:function(){},onClick:function(){},onBeforeAppend:function(){},onAppend:function(){},onAfterAppend:function(){},onLoaded:function(){}},t.lxlui.controls.Tree=function(e,i){t.lxlui.controls.Tree.base.constructor.call(this,e,i)},t.lxlui.controls.Tree.lxlExtend(t.lxlui.core.UIComponent,{_init:function(){t.lxlui.controls.Tree.base._init.call(this);var e=this.options
;e.single&&(e.autoCheckboxEven=!1)},_render:function(){var e=this,i=this.options;e.set(i,!0),e.tree=t(e.element),e.tree.addClass("tree"),e.toggleNodeCallbacks=[],e.sysAttribute=["isexpand","ischecked","href","style","delay"],e.loading=t("<div class='tree-loading'></div>"),e.tree.after(e.loading),e.data=[],e.maxOutlineLevel=1,e.treedataindex=0,e._applyTree(),e._setTreeEven(),e.set(i,!1),e.trigger("loaded")},_setTreeLine:function(t){t?this.tree.removeClass("tree-noline"):this.tree.addClass("tree-noline")},_setParms:function(){var e=this.options;t.isFunction(e.parms)&&(e.parms=e.parms())},reload:function(t){var e=this,i=this.options;e.clear(),e.loadData(null,i.url,null,{success:t})},reloadNode:function(t,e,i){var n=this,o=this.options;if(n.clear(t),"string"==typeof e)n.loadData(t,e,null,{success:i});else{if(!e)return;o.idField&&o.parentIDField&&(e=n.arrayToTree(e,o.idField,o.parentIDField)),n.append(t,e)}},_setUrl:function(t){var e=this;this.options;t&&(e.clear(),e.loadData(null,t))},_setData:function(t){t&&(this.clear(),this.append(null,t))},setData:function(t){this.set("data",t)},getData:function(){return this.data},hasChildren:function(t){return this.options.isLeaf?!this.options.isLeaf(t):!!t.children},getParent:function(e,i){var n=this;e=n.getNodeDom(e);var o=n.getParentTreeItem(e,i);if(!o)return null;var a=t(o).attr("treedataindex");return n._getDataNodeByTreeDataIndex(n.data,a)},getParentTreeItem:function(e,i){e=this.getNodeDom(e);var n=t(e);if(n.parent().hasClass("tree"))return null;if(void 0===i)return 0===n.parent().parent("li").length?null:n.parent().parent("li")[0];for(var o=parseInt(n.attr("outlinelevel")),a=n,r=o-1;r>=i;r--)a=a.parent().parent("li");return a[0]},getChecked:function(){var e=this;this.options;if(!this.options.checkbox)return null;var i=[];return t(".checkbox-checked",e.tree).parent().parent("li").each(function(){var n=parseInt(t(this).attr("treedataindex"));i.push({target:this,data:e._getDataNodeByTreeDataIndex(e.data,n)})}),i},getCheckedData:function(){var e=this;this.options;if(!this.options.checkbox)return null;var i=[];return t(".checkbox-checked",e.tree).parent().parent("li").each(function(){var n=parseInt(t(this).attr("treedataindex"));i.push(e._getDataNodeByTreeDataIndex(e.data,n))}),i},refreshTree:function(){var e=this;this.options;t.each(this.getChecked(),function(i,n){e._setParentCheckboxStatus(t(n.target))})},getSelected:function(){var e=this,i=(this.options,{});if(i.target=t(".selected",e.tree).parent("li")[0],i.target){var n=parseInt(t(i.target).attr("treedataindex"));return i.data=e._getDataNodeByTreeDataIndex(e.data,n),i}return null},upgrade:function(e){var i=this;this.options;t(".note",e).each(function(){t(this).removeClass("note").addClass("expandable-open")}),t(".note-last",e).each(function(){t(this).removeClass("note-last").addClass("expandable-open")}),t("."+i._getChildNodeClassName(),e).each(function(){t(this).removeClass(i._getChildNodeClassName()).addClass(i._getParentNodeClassName(!0))})},demotion:function(e){var i=this;this.options;if(e||"li"==e[0].tagName.toLowerCase()){var n=t(e).hasClass("last");t(".expandable-open",e).each(function(){t(this).removeClass("expandable-open").addClass(n?"note-last":"note")}),t(".expandable-close",e).each(function(){t(this).removeClass("expandable-close").addClass(n?"note-last":"note")}),t("."+i._getParentNodeClassName(!0),e).each(function(){t(this).removeClass(i._getParentNodeClassName(!0)).addClass(i._getChildNodeClassName())})}},collapseAll:function(){var e=this;this.options;t(".expandable-open",e.tree).click()},expandAll:function(){var e=this;this.options;t(".expandable-close",e.tree).click()},arrayToTree:function(t,e,i){function n(t){return"string"==typeof t&&(t=t.replace(/[.]/g,"").toLowerCase()),t}this.options;if(!t||!t.length)return[];for(var o=[],a={},r=t.length,l=0;l<r;l++){var s=t[l],d=n(s[e]);a[d]=s}for(var l=0;l<r;l++){var c=t[l],d=n(c[i]),h=a[d];h?(h.children=h.children||[],h.children.push(c)):o.push(c)}return o},loadData:function(e,i,n,o){var a=this,r=this.options;o=t.extend({showLoading:function(){a.loading.show()},success:function(){},error:function(){},hideLoading:function(){a.loading.hide()}},o||{});var l=r.ajaxType;n=t.extend(t.isFunction(r.parms)?r.parms():r.parms,n),"application/json"==r.ajaxContentType&&"string"!=typeof n&&(n=lxl.toJSON(n));var s=t.isFunction(r.urlParms)?r.urlParms.call(a):r.urlParms;if(s)for(var d in s)i+=-1==i.indexOf("?")?"?":"&",i+=d+"="+s[d];var c={type:l,url:i,data:n,dataType:"json",beforeSend:function(){o.showLoading()},success:function(t){t&&(r.idField&&r.parentIDField&&(t=a.arrayToTree(t,r.idField,r.parentIDField)),o.hideLoading(),a.append(e,t),a.trigger("success",[t]),o.success(t))},error:function(t,e,i){try{o.hideLoading(),a.trigger("error",[t,e,i]),o.error(t,e,i)}catch(t){}}};r.ajaxContentType&&(c.contentType=r.ajaxContentType),t.ajax(c)},clear:function(e){var i=this;this.options;if(e){var n=i.getNodeDom(e),o=i._getDataNodeByTreeDataIndex(i.data,t(n).attr("treedataindex"));t(n).find("ul.children").remove(),o&&(o.children=[])}else i.toggleNodeCallbacks=[],i.data=null,i.data=[],i.nodes=null,i.tree.html("")},getNodeDom:function(e){var i=this;this.options;return null==e?e:"string"==typeof e||"number"==typeof e?t("li[treedataindex="+e+"]",i.tree).get(0):"object"==typeof e&&"treedataindex"in e?i.getNodeDom(e.treedataindex):e.target&&e.data?e.target:e},hide:function(e){var i=this;this.options;(e=i.getNodeDom(e))&&t(e).hide()},show:function(e){var i=this;this.options;(e=i.getNodeDom(e))&&t(e).show()},remove:function(e){var i=this,n=this.options;e=i.getNodeDom(e);var o=parseInt(t(e).attr("treedataindex")),a=i._getDataNodeByTreeDataIndex(i.data,o);a&&i._setTreeDataStatus([a],"delete");var r=i.getParentTreeItem(e);n.checkbox&&i._setParentCheckboxStatus(t(e)),t(e).remove(),i._updateStyle(r?t("ul:first",r):i.tree)},_updateStyle:function(e){var i=this,n=(this.options,t(" > li",e)),o=n.length;o&&n.each(function(e){0!==e||t(this).hasClass("first")||t(this).addClass("first"),e!=o-1||t(this).hasClass("last")||t(this).addClass("last"),0===e&&e==o-1&&t(this).addClass("onlychild"),t("> div .note,> div .note-last",this).removeClass("note note-last").addClass(e==o-1?"note-last":"note"),i._setTreeItem(this,{isLast:e==o-1})})},update:function(e,i){var n=this,o=this.options;e=n.getNodeDom(e);var a=parseInt(t(e).attr("treedataindex"));nodedata=n._getDataNodeByTreeDataIndex(n.data,a);for(var r in i)nodedata[r]=i[r],r==o.textFieldName&&t("> .tree-body > span",e).text(i[r])},append:function(e,i,n,o){var a=this,r=this.options;if(e=a.getNodeDom(e),!1===a.trigger("beforeAppend",[e,i]))return!1;if(!i||!i.length)return!1;if(r.idFieldName&&r.parentIDFieldName&&(i=a.arrayToTree(i,r.idFieldName,r.parentIDFieldName)),a._addTreeDataIndexToData(i),a._setTreeDataStatus(i,"add"),null!=n&&(n=a.getNodeDom(n)),a.trigger("append",[e,i]),a._appendData(e,i),null==e){var l=a._getTreeHTMLByData(i,1,[],!0);return l[l.length-1]=l[0]="",null!=n?(t(n)[o?"after":"before"](l.join("")),a._updateStyle(e?t("ul:first",e):a.tree)):(t("> li:last",a.tree).length>0&&a._setTreeItem(t("> li:last",a.tree)[0],{isLast:!1}),a.tree.append(l.join(""))),t(".tree-body",a.tree).hover(function(){t(this).addClass("hover")},function(){t(this).removeClass("hover")}),a._upadteTreeWidth(),void a.trigger("afterAppend",[e,i])}var s=t(e),d=parseInt(s.attr("outlinelevel"));t("> ul",s).length>0||(s.append("<ul class='children'></ul>"),a.upgrade(e));for(var c=[],h=1;h<=d-1;h++){var u=t(a.getParentTreeItem(e,h));c.push(u.hasClass("last"))}c.push(s.hasClass("last"));var l=a._getTreeHTMLByData(i,d+1,c,!0);l[l.length-1]=l[0]="",null!=n?(t(n)[o?"after":"before"](l.join("")),a._updateStyle(e?t("ul:first",e):a.tree)):(t("> .children > li:last",s).length>0&&a._setTreeItem(t("> .children > li:last",s)[0],{isLast:!1}),t(">.children",e).append(l.join(""))),a._upadteTreeWidth(),t(">.children .tree-body",e).hover(function(){t(this).addClass("hover")},function(){t(this).removeClass("hover")}),a.trigger("afterAppend",[e,i])},cancelSelect:function(e,i){var n=this,o=this.options,a=n.getNodeDom(e),r=t(a),l=parseInt(r.attr("treedataindex")),s=n._getDataNodeByTreeDataIndex(n.data,l),d=t(">div:first",r);o.checkbox?t(".checkbox",d).removeClass("checkbox-checked").addClass("checkbox-unchecked"):d.removeClass("selected"),!1!==i&&n.trigger("cancelSelect",[{data:s,target:r[0]}])},selectNode:function(i,n){var o=this,a=this.options,r=null;if("function"==typeof i)r=i;else{if("object"==typeof i){var l=t(i),s=parseInt(l.attr("treedataindex")),d=o._getDataNodeByTreeDataIndex(o.data,s),c=t(">div:first",l);return c.length||(c=t("li[treedataindex="+s+"] >div:first",o.tree)),a.checkbox?t(".checkbox",c).removeClass("checkbox-unchecked").addClass("checkbox-checked"):(t("div.selected",o.tree).removeClass("selected"),c.addClass("selected")),void(!1!==n&&o.trigger("select",[{data:d,target:c.parent().get(0)}]))}r=function(t){return!(!t[a.idFieldName]&&0!==t[a.idFieldName])&&e(t[a.idFieldName].toString())==e(i.toString())}}t("li",o.tree).each(function(){var e=t(this),i=parseInt(e.attr("treedataindex")),a=o._getDataNodeByTreeDataIndex(o.data,i);r(a,i)?o.selectNode(this,n):o.options.checkbox||o.cancelSelect(this,n)})},getTextByID:function(t){var e=this,i=this.options,n=e.getDataByID(t);return n?n[i.textFieldName]:null},getDataByID:function(e){function i(t){for(var n=0;n<t.length;n++){var a=t[n];if(a[o.idFieldName]==e)return a;if(a.children&&a.children.length){var r=i(a.children);if(r)return r}}return null}var n=this,o=this.options,a=null;return n.data&&n.data.length?i(n.data):(t("li",n.tree).each(function(){if(!a){var i=t(this),r=parseInt(i.attr("treedataindex")),l=n._getDataNodeByTreeDataIndex(n.data,r);l[o.idFieldName].toString()==e.toString()&&(a=l)}}),a)},arrayToTree:function(t,e,i){if(!t||!t.length)return[];for(var n=[],o={},a=t.length,r=0;r<a;r++){var l=t[r];o[l[e]]=l}for(var r=0;r<a;r++){var s=t[r],d=o[s[i]];d?(d.children=d.children||[],d.children.push(s)):n.push(s)}return n},_getDataNodeByTreeDataIndex:function(t,e){for(var i=this,n=(this.options,0);n<t.length;n++){if(t[n].treedataindex==e)return t[n];if(t[n].children){var o=i._getDataNodeByTreeDataIndex(t[n].children,e);if(o)return o}}return null},_setTreeDataStatus:function(e,i){var n=this,o=this.options;t(e).each(function(){this[o.statusName]=i,this.children&&n._setTreeDataStatus(this.children,i)})},_addTreeDataIndexToData:function(e){var i=this;this.options;t(e).each(function(){void 0===this.treedataindex&&(this.treedataindex=i.treedataindex++,this.children&&i._addTreeDataIndexToData(this.children))})},_addToNodes:function(e){var i=this;this.options;i.nodes=i.nodes||[],i.nodes.push(e),e.children&&t(e.children).each(function(t,e){i._addToNodes(e)})},_appendData:function(e,i){var n=this,o=(this.options,parseInt(t(e).attr("treedataindex"))),a=n._getDataNodeByTreeDataIndex(n.data,o);void 0===n.treedataindex&&(n.treedataindex=0),a&&void 0===a.children&&(a.children=[]),t(i).each(function(t,e){a?a.children[a.children.length]=e:n.data[n.data.length]=e,n._addToNodes(e)})},_setTreeItem:function(e,i){var n=this;this.options;if(i){e=n.getNodeDom(e);var o=t(e),a=parseInt(o.attr("outlinelevel"));void 0!==i.isLast&&(!0===i.isLast?(o.removeClass("last").addClass("last"),t("> div .note",o).removeClass("note").addClass("note-last"),t(".children li",o).find(".tree-box:eq("+(a-1)+")").removeClass("line")):!1===i.isLast&&(o.removeClass("last"),t("> div .note-last",o).removeClass("note-last").addClass("note"),t(".children li",o).find(".tree-box:eq("+(a-1)+")").removeClass("line").addClass("line")))}},_upadteTreeWidth:function(){var t=this,e=this.options,i=22*t.maxOutlineLevel;e.checkbox&&(i+=22),(e.parentIcon||e.childIcon)&&(i+=22),i+=e.nodeWidth,e.nodeWidth&&t.tree.width(i)},_getChildNodeClassName:function(){return"tree-icon-"+this.options.childIcon},_getParentNodeClassName:function(t){var e=this.options,i="tree-icon-"+e.parentIcon;return t&&(i+="-open"),i},_isExpand:function(t,e){var i=this.options,n=null!=t.isExpand?t.isExpand:null!=t.isexpand?t.isexpand:i.isExpand;return null==n||("function"==typeof n&&(n=i.isExpand({data:t,level:e})),"boolean"==typeof n?n:"string"==typeof n?"true"==n:"number"!=typeof n||n>e)},_getDelay:function(e,i){var n=this.options,o=null!=e.delay?e.delay:n.delay;return null!=o&&("function"==typeof o&&(o=o({data:e,level:i})),"boolean"==typeof o?o:"string"==typeof o?{url:o}:("number"==typeof o&&(o=[o]),t.isArray(o)?-1!=t.inArray(i,o):!("object"!=typeof o||!o.url)&&o))},_getTreeHTMLByData:function(e,i,n,o){var a=this,r=this.options;a.maxOutlineLevel<i&&(a.maxOutlineLevel=i),n=n||[],i=i||1;var l=[];o?l.push("<ul class='children'>"):l.push('<ul class="children" style="display:none">');for(var s=0;s<e.length;s++){var d=e[s],c=0===s,h=s==e.length-1,u=a._getDelay(d,i),g=!u&&a._isExpand(d,i);l.push("<li "),void 0!==d.treedataindex&&l.push('treedataindex="'+d.treedataindex+'" '),g&&l.push("isexpand="+d.isexpand+" "),l.push("outlinelevel="+i+" ");for(var p=0;p<a.sysAttribute.length;p++)t(this).attr(a.sysAttribute[p])&&(e[dataindex][a.sysAttribute[p]]=t(this).attr(a.sysAttribute[p]));for(var p=0;p<r.attribute.length;p++)d[r.attribute[p]]&&l.push(r.attribute[p]+'="'+d[r.attribute[p]]+'" ');l.push('class="'),c&&l.push("first "),h&&l.push("last "),c&&h&&l.push("onlychild "),l.push('"'),l.push(">"),l.push('<div class="tree-body'),r.selectable&&!1===r.selectable(d)&&l.push(" unselectable"),l.push('">');for(var f=0;f<=i-2;f++)n[f]?l.push('<div class="tree-box"></div>'):l.push('<div class="tree-box line"></div>');if(a.hasChildren(d)?(g?l.push('<div class="tree-box expandable-open"></div>'):l.push('<div class="tree-box expandable-close"></div>'),r.checkbox&&(d.ischecked?l.push('<div class="tree-box checkbox checkbox-checked"></div>'):l.push('<div class="tree-box checkbox checkbox-unchecked"></div>')),r.parentIcon&&(l.push('<div class="tree-box tree-icon '),l.push(a._getParentNodeClassName(!!g)+" "),r.iconFieldName&&d[r.iconFieldName]?l.push("tree-icon-none"):r.iconClsFieldName&&d[r.iconClsFieldName]&&l.push("tree-icon-"+d[r.iconClsFieldName]+" "),l.push('">'),r.iconFieldName&&d[r.iconFieldName]&&l.push('<img src="'+d[r.iconFieldName]+'" />'),l.push("</div>"))):(h?l.push('<div class="tree-box note-last"></div>'):l.push('<div class="tree-box note"></div>'),r.checkbox&&(d.ischecked?l.push('<div class="tree-box checkbox checkbox-checked"></div>'):l.push('<div class="tree-box checkbox checkbox-unchecked"></div>')),r.childIcon&&(l.push('<div class="tree-box tree-icon '),l.push(a._getChildNodeClassName()+" "),r.iconFieldName&&d[r.iconFieldName]?l.push("tree-icon-none"):r.iconClsFieldName&&d[r.iconClsFieldName]&&l.push("tree-icon-"+d[r.iconClsFieldName]+" "),l.push('">'),r.iconFieldName&&d[r.iconFieldName]&&l.push('<img src="'+d[r.iconFieldName]+'" />'),l.push("</div>"))),r.render?l.push("<span>"+r.render(d,d[r.textFieldName])+"</span>"):l.push("<span>"+d[r.textFieldName]+"</span>"),l.push("</div>"),a.hasChildren(d)){for(var m=[],f=0;f<n.length;f++)m.push(n[f]);m.push(h),u?!0===u?a.toggleNodeCallbacks.push({data:d,callback:function(e,n){var o=a._getTreeHTMLByData(n.children,i+1,m,g).join("");t(e).append(o),t(">.children .tree-body",e).hover(function(){t(this).addClass("hover")},function(){t(this).removeClass("hover")}),a._removeToggleNodeCallback(n)}}):u.url&&function(e,i,n){a.toggleNodeCallbacks.push({data:e,callback:function(e,o){a.loadData(e,i,n,{showLoading:function(){t("div.expandable-close:first",e).addClass("tree-box-loading")},hideLoading:function(){t("div.tree-box-loading:first",e).removeClass("tree-box-loading")}}),a._removeToggleNodeCallback(o)}})}(d,u.url,u.parms):l.push(a._getTreeHTMLByData(d.children,i+1,m,g).join(""))}l.push("</li>")}return l.push("</ul>"),l},_removeToggleNodeCallback:function(t){for(var e=this,i=(this.options,0);i<=e.toggleNodeCallbacks.length;i++)if(e.toggleNodeCallbacks[i]&&e.toggleNodeCallbacks[i].data==t){e.toggleNodeCallbacks.splice(i,1);break}},_getDataByTreeHTML:function(e){var i=this,n=this.options,o=[];return t("> li",e).each(function(e,a){var r=o.length;o[r]={treedataindex:i.treedataindex++},o[r][n.textFieldName]=t("> span,> a",this).html();for(var l=0;l<i.sysAttribute.length;l++)t(this).attr(i.sysAttribute[l])&&(o[r][i.sysAttribute[l]]=t(this).attr(i.sysAttribute[l]));for(var l=0;l<n.attribute.length;l++)t(this).attr(n.attribute[l])&&(o[r][n.attribute[l]]=t(this).attr(n.attribute[l]));t("> ul",this).length>0&&(o[r].children=i._getDataByTreeHTML(t("> ul",this)))}),o},_applyTree:function(){var e=this;this.options;e.data=e._getDataByTreeHTML(e.tree);var i=e._getTreeHTMLByData(e.data,1,[],!0);i[i.length-1]=i[0]="",e.tree.html(i.join("")),e._upadteTreeWidth(),t(".tree-body",e.tree).hover(function(){t(this).addClass("hover")},function(){t(this).removeClass("hover")})},_getSrcElementByEvent:function(e){var i=this,n=e.target||e.srcElement,o=n.tagName.toLowerCase(),a=t(n).parents().add(n),r=function(e){for(var i=a.length-1;i>=0;i--)if(t(a[i]).hasClass(e))return a[i];return null};if(-1==a.index(this.element))return{out:!0};var l={tree:r("tree"),node:r("tree-body"),checkbox:r("checkbox"),icon:r("tree-icon"),text:"span"==o};if(l.node){var s=parseInt(t(l.node).parent().attr("treedataindex"));l.data=i._getDataNodeByTreeDataIndex(i.data,s)}return l},_setTreeEven:function(){var e=this,i=this.options;e.hasBind("contextmenu")&&e.tree.bind("contextmenu",function(i){var n=i.target||i.srcElement,o=null;if("a"==n.tagName.toLowerCase()||"span"==n.tagName.toLowerCase()||t(n).hasClass("tree-box")?o=t(n).parent().parent():t(n).hasClass("tree-body")?o=t(n).parent():"li"==n.tagName.toLowerCase()&&(o=t(n)),o){var a=parseInt(o.attr("treedataindex")),r=e._getDataNodeByTreeDataIndex(e.data,a);return e.trigger("contextmenu",[{data:r,target:o[0]},i])}}),e.tree.click(function(n){var o=n.target||n.srcElement,a=null;if(a="a"==o.tagName.toLowerCase()||"span"==o.tagName.toLowerCase()||t(o).hasClass("tree-box")?t(o).parent().parent():t(o).hasClass("tree-body")?t(o).parent():t(o)){var r=parseInt(a.attr("treedataindex")),l=e._getDataNodeByTreeDataIndex(e.data,r),s=t("div.tree-body:first",a).find("div.expandable-open:first,div.expandable-close:first"),d=t(o).hasClass("expandable-open")||t(o).hasClass("expandable-close");if(!t(o).hasClass("checkbox")&&!d&&!a.hasClass("unselectable"))if(t(">div:first",a).hasClass("selected")&&i.needCancel){if(!1===e.trigger("beforeCancelSelect",[{data:l,target:a[0]}]))return!1;t(">div:first",a).removeClass("selected"),e.trigger("cancelSelect",[{data:l,target:a[0]}])}else{if(!1===e.trigger("beforeSelect",[{data:l,target:a[0]}]))return!1;t(".tree-body",e.tree).removeClass("selected"),t(">div:first",a).addClass("selected"),e.trigger("select",[{data:l,target:a[0]}])}if(t(o).hasClass("checkbox"))i.autoCheckboxEven?(t(o).hasClass("checkbox-unchecked")?(t(o).removeClass("checkbox-unchecked").addClass("checkbox-checked"),t(".children .checkbox",a).removeClass("checkbox-incomplete checkbox-unchecked").addClass("checkbox-checked"),e.trigger("check",[{data:l,target:a[0]},!0])):t(o).hasClass("checkbox-checked")?(t(o).removeClass("checkbox-checked").addClass("checkbox-unchecked"),t(".children .checkbox",a).removeClass("checkbox-incomplete checkbox-checked").addClass("checkbox-unchecked"),e.trigger("check",[{data:l,target:a[0]},!1])):t(o).hasClass("checkbox-incomplete")&&(t(o).removeClass("checkbox-incomplete").addClass("checkbox-checked"),t(".children .checkbox",a).removeClass("checkbox-incomplete checkbox-unchecked").addClass("checkbox-checked"),e.trigger("check",[{data:l,target:a[0]},!0])),e._setParentCheckboxStatus(a)):t(o).hasClass("checkbox-unchecked")?(t(o).removeClass("checkbox-unchecked").addClass("checkbox-checked"),i.single&&t(".checkbox",e.tree).not(o).removeClass("checkbox-checked").addClass("checkbox-unchecked"),e.trigger("check",[{data:l,target:a[0]},!0])):t(o).hasClass("checkbox-checked")&&(t(o).removeClass("checkbox-checked").addClass("checkbox-unchecked"),e.trigger("check",[{data:l,target:a[0]},!1]));else if(!s.hasClass("expandable-open")||i.btnClickToToggleOnly&&!d){if(s.hasClass("expandable-close")&&(!i.btnClickToToggleOnly||d)){if(!1===e.trigger("beforeExpand",[{data:l,target:a[0]}]))return!1;t(e.toggleNodeCallbacks).each(function(){this.data==l&&this.callback(a[0],l)}),s.removeClass("expandable-close").addClass("expandable-open");var c=function(){e.trigger("expand",[{data:l,target:a[0]}])};i.slide?t("> .children",a).slideToggle("fast",c):(t("> .children",a).show(),c()),t("> div ."+e._getParentNodeClassName(),a).removeClass(e._getParentNodeClassName()).addClass(e._getParentNodeClassName(!0))}}else{if(!1===e.trigger("beforeCollapse",[{data:l,target:a[0]}]))return!1;s.removeClass("expandable-open").addClass("expandable-close"),i.slide?t("> .children",a).slideToggle("fast"):t("> .children",a).hide(),t("> div ."+e._getParentNodeClassName(!0),a).removeClass(e._getParentNodeClassName(!0)).addClass(e._getParentNodeClassName()),e.trigger("collapse",[{data:l,target:a[0]}])}e.trigger("click",[{data:l,target:a[0]}])}}),t.fn.lxlDrag&&i.nodeDraggable&&(e.nodeDroptip=t("<div class='drag-nodedroptip' style='display:none'></div>").appendTo("body"),e.tree.lxlDrag({revert:!0,animate:!1,proxyX:20,proxyY:20,proxy:function(n,o){if(e._getSrcElementByEvent(o).node){var a="dragging";if(i.nodeDraggingRender)a=i.nodeDraggingRender(n.draggingNodes,n,e);else{a="";var r=!1;for(var l in n.draggingNodes){var s=n.draggingNodes[l];r&&(a+=","),a+=s.text,r=!0}}return t("<div class='drag-proxy' style='display:none'><div class='drop-icon drop-no'></div>"+a+"</div>").appendTo("body")}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),e.children[this.id]=this},onStartDrag:function(t,n){if(2==n.button)return!1;this.set("cursor","default");var o=e._getSrcElementByEvent(n);if(o.checkbox)return!1;if(i.checkbox){var a=e.getChecked();this.draggingNodes=[];for(var r in a)this.draggingNodes.push(a[r].data);if(!this.draggingNodes||!this.draggingNodes.length)return!1}else this.draggingNodes=[o.data];this.draggingNode=o.data,this.set("cursor","move"),e.nodedragging=!0,this.validRange={top:e.tree.offset().top,bottom:e.tree.offset().top+e.tree.height(),left:e.tree.offset().left,right:e.tree.offset().left+e.tree.width()}},onDrag:function(i,n){var o=this.draggingNode;if(!o)return!1;var a=this.draggingNodes?this.draggingNodes:[o];null==e.nodeDropIn&&(e.nodeDropIn=-1);var r=n.pageX,l=n.pageY,s=!1,d=this.validRange;if(r<d.left||r>d.right||l>d.bottom||l<d.top)return e.nodeDropIn=-1,e.nodeDroptip.hide(),void this.proxy.find(".drop-icon:first").removeClass("drop-yes drop-add").addClass("drop-no");for(var c=0,h=e.nodes.length;c<h;c++){var u=e.nodes[c],g=u.treedataindex;if(o.treedataindex==g&&(s=!0),-1==t.inArray(u,a)){var p=!!s;if(-1==e.nodeDropIn||e.nodeDropIn==g){var f=t("li[treedataindex="+g+"] div:first",e.tree),m=f.offset(),b={top:m.top,bottom:m.top+f.height(),left:e.tree.offset().left,right:e.tree.offset().left+e.tree.width()};if(r>b.left&&r<b.right&&l>b.top&&l<b.bottom){var v=m.top;p&&(v+=f.height()),e.nodeDroptip.css({left:b.left,top:v,width:b.right-b.left}).show(),e.nodeDropIn=g,e.nodeDropDir=p?"bottom":"top",l>b.top+7&&l<b.bottom-7?(this.proxy.find(".drop-icon:first").removeClass("drop-no drop-yes").addClass("drop-add"),e.nodeDroptip.hide(),e.nodeDropInParent=!0):(this.proxy.find(".drop-icon:first").removeClass("drop-no drop-add").addClass("drop-yes"),e.nodeDroptip.show(),e.nodeDropInParent=!1);break}-1!=e.nodeDropIn&&(e.nodeDropIn=-1,e.nodeDropInParent=!1,e.nodeDroptip.hide(),this.proxy.find(".drop-icon:first").removeClass("drop-yes drop-add").addClass("drop-no"))}}}},onStopDrag:function(i,n){var o=this.draggingNodes;if(e.nodedragging=!1,-1!=e.nodeDropIn){for(var a=0;a<o.length;a++){var r=o[a].children;r&&(o=t.grep(o,function(e,i){return-1==t.inArray(e,r)}))}for(var a in o){var l=o[a];e.nodeDropInParent?(e.remove(l),e.append(e.nodeDropIn,[l])):(e.remove(l),e.append(e.getParent(e.nodeDropIn),[l],e.nodeDropIn,"bottom"==e.nodeDropDir))}e.nodeDropIn=-1}e.nodeDroptip.hide(),this.set("cursor","default")}}))},_setParentCheckboxStatus:function(e){var i=this,n=this.options,o=0===t(".checkbox-unchecked",e.parent()).length;0===t(".checkbox-checked",e.parent()).length?e.parent().prev().find("> .checkbox").removeClass("checkbox-checked checkbox-incomplete").addClass("checkbox-unchecked"):o||!n.enabledCompleteCheckbox?e.parent().prev().find(".checkbox").removeClass("checkbox-unchecked checkbox-incomplete").addClass("checkbox-checked"):e.parent().prev().find("> .checkbox").removeClass("checkbox-unchecked checkbox-checked").addClass("checkbox-incomplete"),e.parent().parent("li").length>0&&i._setParentCheckboxStatus(e.parent().parent("li"))}})}(jQuery),function(t){t.lxlUpload=function(){return t.lxlui.run.call(null,"lxlUpload",arguments,{isStatic:!0})},t.lxlDefaults.Upload={elem:null,accept:"images",exts:"",auto:!0,bindAction:"",url:"",field:"file",method:"post",data:{},drag:!0,size:0,number:0,multiple:!1},t.lxlMethos.Upload=t.lxlMethos.Upload||{},t.lxlui.controls.Upload=function(e){t.lxlui.controls.Upload.base.constructor.call(this,null,e)},t.lxlui.controls.Upload.lxlExtend(t.lxlui.core.UIComponent,{__getType:function(){return"Upload"},__idPrev:function(){return"Upload"},_extendMethods:function(){return t.lxlMethos.Upload},_render:function(){var e=this,i=this.options;e.elem=t(i.elem),e.bindAction=t(i.bindAction),e.initFile(),e.initEvents()},showMsg:function(e){return t.lxlDialog.alert(e)},initFile:function(){var e=this,i=this.options,n=e.elemFile=t(['<input class="upload-file" type="file" accept="'+i.acceptMime+'" name="'+i.field+'"',i.multiple?" multiple":"",">"].join("")),o=e.elem.next();(o.hasClass("upload-file")||o.hasClass("upload-form"))&&o.remove(),t.browser.msie&&t.browser.version<10&&e.elem.wrap('<div class="upload-wrap"></div>'),e.isFile()?(e.elemFile=e.elem,i.field=e.elem[0].name):e.elem.after(n),t.browser.msie&&t.browser.version<10&&e.initIE()},initIE:function(){var e=this,i=this.options,n=t('<iframe id="upload-iframe" class="upload-iframe" name="upload-iframe" frameborder="0"></iframe>'),o=t(['<form target="upload-iframe" class="upload-form" method="post" key="set-mine" enctype="multipart/form-data" action="'+i.url+'">',"</form>"].join(""));t("#upload-iframe")[0]||t("body").append(n),e.elem.next().hasClass("upload-form")||(e.elemFile.wrap(o),e.elem.next(".upload-form").append(function(){var e=[];return t.lxlui.each(i.data,function(t,i){i="function"==typeof i?i():i,e.push('<input type="hidden" name="'+t+'" value="'+i+'">')}),e.join("")}()))},isFile:function(){var t=this.options;try{var e=t.elem[0];if(!e)return;return"input"===e.tagName.toLocaleLowerCase()&&"file"===e.type}catch(t){}},preview:function(e){var i=this;window.FileReader&&t.lxlui.each(i.chooseFiles,function(t,i){var n=new FileReader;n.readAsDataURL(i),n.onload=function(){e&&e(t,i,this.result)}})},upload:function(e,i){var n,o=this,a=this.options,r=o.elemFile[0],l=function(){var i=0,n=0,l=e||o.files||o.chooseFiles||r.files,s=function(){a.multiple&&i+n===o.fileLength&&"function"==typeof a.allDone&&a.allDone({total:o.fileLength,successful:i,aborted:n})};t.lxlui.each(l,function(e,r){var l=new FormData;l.append(a.field,r),t.lxlui.each(a.data,function(t,e){e="function"==typeof e?e():e,l.append(t,e)}),t.ajax({url:a.url,type:"post",data:l,contentType:!1,processData:!1,dataType:"json",headers:a.headers||{},success:function(t){i++,d(e,t),s()},error:function(){n++,o.showMsg("请求上传接口出现异常"),c(e),s()}})})},s=function(){var e=t("#upload-iframe");o.elemFile.parent().submit(),clearInterval(Class.timer),Class.timer=setInterval(function(){var t,i=e.contents().find("body");try{t=i.text()}catch(t){o.showMsg("获取上传后的响应信息出现异常"),clearInterval(Class.timer),c()}t&&(clearInterval(Class.timer),i.html(""),d(0,t))},30)},d=function(t,e){if(o.elemFile.next(".upload-choose").remove(),r.value="","object"!=typeof e)try{e=JSON.parse(e)}catch(t){return e={},o.showMsg("请对上传接口返回有效JSON")}"function"==typeof a.done&&a.done(e,t||0,function(t){o.upload(t)})},c=function(t){a.auto&&(r.value=""),"function"==typeof a.error&&a.error(t||0,function(t){o.upload(t)})},h=a.exts,u=function(){var i=[];return t.lxlui.each(e||o.chooseFiles,function(t,e){i.push(e.name)}),i}(),g={preview:function(t){o.preview(t)},upload:function(t,e){var i={};i[t]=e,o.upload(i)},pushFile:function(){return o.files=o.files||{},t.lxlui.each(o.chooseFiles,function(t,e){o.files[t]=e}),o.files},resetFile:function(t,e,i){var n=new File([e],i);o.files=o.files||{},o.files[t]=n}};if(u=0===u.length?r.value.match(/[^\/\\]+\..+/g)||[]||"":u,0!==u.length){switch(a.accept){case"file":if(h&&!RegExp("\\w\\.("+h+")$","i").test(escape(u)))return o.showMsg("选择的文件中包含不支持的格式"),r.value="";break;case"video":if(!RegExp("\\w\\.("+(h||"avi|mp4|wma|rmvb|rm|flash|3gp|flv")+")$","i").test(escape(u)))return o.showMsg("选择的视频中包含不支持的格式"),r.value="";break;case"audio":if(!RegExp("\\w\\.("+(h||"mp3|wav|mid")+")$","i").test(escape(u)))return o.showMsg("选择的音频中包含不支持的格式"),r.value="";break;default:if(t.lxlui.each(u,function(t,e){RegExp("\\w\\.("+(h||"jpg|png|gif|bmp|jpeg$")+")","i").test(escape(e))||(n=!0)}),n)return o.showMsg("选择的图片中包含不支持的格式"),r.value=""}if(o.fileLength=function(){var i=0,n=e||o.files||o.chooseFiles||r.files;return t.lxlui.each(n,function(){i++}),i}(),a.number&&o.fileLength>a.number)return o.showMsg("同时最多只能上传的数量为："+a.number);if(a.size>0&&!(t.browser.msie&&t.browser.version<10)){var p;if(t.lxlui.each(o.chooseFiles,function(t,e){if(e.size>1024*a.size){var i=a.size/1024;i=i>=1?i.toFixed(2)+"MB":a.size+"KB",r.value="",p=i}}),p)return o.showMsg("文件不能超过"+p)}!function(){if("choose"!==i&&!a.auto||(a.choose&&a.choose(g),"choose"!==i)){if(a.before&&a.before(g),t.browser.msie)return t.browser.version>9?l():s();l()}}()}},initEvents:function(){var e=this,i=this.options,n=function(i){e.chooseFiles={},t.lxlui.each(i,function(t,i){var n=(new Date).getTime();e.chooseFiles[n+"-"+t]=i})},o=function(t,n){var o=e.elemFile,a=t.length>1?t.length+"个文件":(t[0]||{}).name||o[0].value.match(/[^\/\\]+\..+/g)||[]||"";o.next().hasClass("upload-choose")&&o.next().remove(),e.upload(null,"choose"),e.isFile()||i.choose||o.after('<span class="layui-inline upload-choose">'+a+"</span>")};e.elem.off("upload.start").on("upload.start",function(){var n=t(this),o=n.attr("lxlui-data");if(o)try{o=new Function("return "+o)(),e.options=t.extend({},i,o)}catch(t){e.showMsg("Upload element property lxlui-data configuration item has a syntax error: "+o)}e.options.item=n,e.elemFile[0].click()}),t.browser.msie&&t.browser.version<10||e.elem.off("upload.over").on("upload.over",function(){t(this).attr("lay-over","")}).off("upload.leave").on("upload.leave",function(){t(this).removeAttr("lay-over")}).off("upload.drop").on("upload.drop",function(a,r){var l=t(this),s=r.originalEvent.dataTransfer.files||[];l.removeAttr("lay-over"),n(s),i.auto?e.upload(s):o(s)}),e.elemFile.off("upload.change").on("upload.change",function(){var t=this.files||[];n(t),i.auto?e.upload():o(t)}),e.bindAction.off("upload.action").on("upload.action",function(){e.upload()}),e.elem.data("haveEvents")||(e.elemFile.on("change",function(){t(this).trigger("upload.change")}),e.elem.on("click",function(){e.isFile()||t(this).trigger("upload.start")}),i.drag&&e.elem.on("dragover",function(e){e.preventDefault(),t(this).trigger("upload.over")}).on("dragleave",function(e){t(this).trigger("upload.leave")}).on("drop",function(e){e.preventDefault(),t(this).trigger("upload.drop",e)}),e.bindAction.on("click",function(){t(this).trigger("upload.action")}),e.elem.data("haveEvents",!0))}})}(jQuery);