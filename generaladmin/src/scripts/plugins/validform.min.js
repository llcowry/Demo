!function(){$.Datatype?($.extend($.Tipmsg.w,{date:"请填写日期！",zh:"请填写中文！",dword:"请填写双字节字符！",money:"请填写货币值！",ipv4:"请填写ip地址！",ipv6:"请填写IPv6地址！",num:"请填写数值！",nn:"请填写大于0的整数",dec:"请填写非负的整数或小数",d:"请填写整数或小数",dd:"请填写大于0的整数或小数",qq:"请填写QQ号码！",unequal:"值不能相等！",notvalued:"不能含有特定值！",idcard:"身份证号码不对！"}),$.extend($.Datatype,{date:/^(?:(?:1[6-9]|[2-9][0-9])[0-9]{2}([-\/.]?)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:(?:1[6-9]|[2-9][0-9])(?:0[48]|[2468][048]|[13579][26])|(?:16|[2468][048]|[3579][26])00)([-\/.]?)0?2\2(?:29))(\s+([01][0-9]:|2[0-3]:)?[0-5][0-9]:[0-5][0-9])?$/,zh:/^[\u4e00-\u9fa5]+$/,dword:/^[^\x00-\xff]+$/,money:/^([\u0024\u00A2\u00A3\u00A4\u20AC\u00A5\u20B1\20B9\uFFE5]\s*)(\d+,?)+\.?\d*\s*$/,ipv4:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,num:/^(\d+[\s,]*)+\.?\d*$/,nn:/^[1-9]\d*$/,dec:/^(([1-9]{1}\d*)|([0]{1}))(\.(\d){1,4})?$/,d:/^-?(([1-9]{1}\d*)|([0]{1}))(\.(\d){1,4})?$/,dd:/^([1-9]\d*(\.\d*[0-9])?)|(0\.\d*[1-9]0*)$/,qq:/^[1-9][0-9]{4,}$/,unequal:function(t,e,i,a){var r=$.trim(e.attr("with")),s=i.find(r+",[name='"+r+"']").val()||r;if(t==$.trim(s))return!1},notvalued:function(t,e,i,a){var r=$.trim(e.attr("with")),s=i.find(r+",[name='"+r+"']").val()||r;if(-1!=t.indexOf($.trim(s)))return!1},min:function(t,e,i,a){var r=~~e.attr("min")||2;return i.find("input[name='"+e.attr("name")+"']:checked").length>=r||"请至少选择"+r+"项！"},max:function(t,e,i,a){var r=~~e.attr("max")||2,s=i.find("input[name='"+e.attr("name")+"']:checked").length;return 0!=s&&(!(s>r)||"最多只能选择"+r+"项！")},byterange:function(t,e,i,a){var r=/[^\x00-\xff]/g,s=~~e.attr("max")||1e8,n=~~e.attr("min")||0;return getslen=t.replace(r,"00").length,getslen>s?"输入字符不能多于"+s+"个，中文算两个字符！":!(getslen<n)||"输入字符不能少于"+n+"个，中文算两个字符！"},numrange:function(t,e,i,a){var r=~~e.attr("max")||1e8,s=~~e.attr("min")||0;return t=t.replace(/\s*/g,"").replace(/,/g,""),/^\d+\.?\d*$/.test(t)?t<s?"值不能小于"+s+"！":!(t>r)||"值不能大于"+r+"！":"只能输入数字！"},daterange:function(t,e,i,a){var r=new Date(e.attr("max").replace(/[-\.,]/g,"/")),s=new Date(e.attr("min").replace(/[-\.,]/g,"/")),t=new Date(t.replace(/[-\.,]/g,"/"));return t.getDate()?t>r?"日期不能大于"+e.attr("max"):!(t<s)||"日期不能小于"+e.attr("min"):"日期格式不对！"},idcard:function(t,e,i,a){var r=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],s=[1,0,10,9,8,7,6,5,4,3,2];if(15==t.length)return function(t){var e=t.substring(6,8),i=t.substring(8,10),a=t.substring(10,12),r=new Date(e,parseFloat(i)-1,parseFloat(a));return r.getYear()==parseFloat(e)&&r.getMonth()==parseFloat(i)-1&&r.getDate()==parseFloat(a)}(t);if(18==t.length){var n=t.split("");return!(!function(t){var e=t.substring(6,10),i=t.substring(10,12),a=t.substring(12,14),r=new Date(e,parseFloat(i)-1,parseFloat(a));return r.getFullYear()==parseFloat(e)&&r.getMonth()==parseFloat(i)-1&&r.getDate()==parseFloat(a)}(t)||!function(t){var e=0;"x"==t[17].toLowerCase()&&(t[17]=10);for(var i=0;i<17;i++)e+=r[i]*t[i];return valCodePosition=e%11,t[17]==s[valCodePosition]}(n))}return!1}})):setTimeout(arguments.callee,10)}(),function(t,e,i){function a(e,i){var a=(t(window).width()-e.outerWidth())/2,r=(t(window).height()-e.outerHeight())/2,r=(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)+(r>0?r:0);e.css({left:a}).animate({top:r},{duration:i,queue:!1})}function r(){if(0!==t("#Validform_msg").length)return!1;n=t('<div id="Validform_msg"><div class="Validform_title">'+o.tit+'<a class="Validform_close" href="javascript:void(0);">&chi;</a></div><div class="Validform_info"></div><div class="iframe"><iframe frameborder="0" scrolling="no" height="100%" width="100%"></iframe></div></div>').appendTo("body"),n.find("a.Validform_close").click(function(){return n.hide(),l=!0,s&&s.focus().addClass("Validform_error"),!1}).focus(function(){this.blur()}),t(window).bind("scroll resize",function(){!l&&a(n,400)})}var s=null,n=null,l=!0,o={tit:"提示信息",w:{"*":"不能为空！","*6-16":"请填写6到16位任意字符！",n:"请填写数字！","n6-16":"请填写6到16位数字！",s:"不能输入特殊字符！","s6-18":"请填写6到18位字符！",p:"请填写邮政编码！",m:"请填写手机号码！",e:"邮箱地址格式不对！",url:"请填写网址！"},def:"请填写正确信息！",undef:"datatype未定义！",reck:"两次输入的内容不一致！",r:"通过信息验证！",c:"正在检测信息…",s:"请{填写|选择}{0|信息}！",v:"所填信息没有经过验证，请稍后…",p:"正在提交数据…"};t.Tipmsg=o;var d=function(e,i,a){var i=t.extend({},d.defaults,i);i.datatype&&t.extend(d.util.dataType,i.datatype);var s=this;if(s.tipmsg={w:{}},s.forms=e,s.objects=[],!0===a)return!1;e.each(function(){if("inited"==this.validform_inited)return!0;this.validform_inited="inited";var e=this;e.settings=t.extend({},i);var a=t(e);e.validform_status="normal",a.data("tipmsg",s.tipmsg),a.delegate("[datatype]","blur",function(){var t=arguments[1];d.util.check.call(this,a,t)}),a.delegate(":text","keypress",function(t){13==t.keyCode&&0==a.find(":submit").length&&a.submit()}),d.util.enhance.call(a,e.settings.tiptype,e.settings.usePlugin,e.settings.tipSweep),e.settings.btnSubmit&&a.find(e.settings.btnSubmit).bind("click",function(){return a.trigger("submit"),!1}),a.submit(function(){var t=d.util.submitForm.call(a,e.settings);return void 0===t&&(t=!0),t}),a.find("[type='reset']").add(a.find(e.settings.btnReset)).bind("click",function(){d.util.resetForm.call(a)})}),(1==i.tiptype||(2==i.tiptype||3==i.tiptype)&&i.ajaxPost)&&r()};d.defaults={tiptype:1,tipSweep:!1,showAllError:!1,postonce:!1,ajaxPost:!1},d.util={dataType:{"*":/[\w\W]+/,"*6-16":/^[\w\W]{6,16}$/,n:/^\d+$/,"n6-16":/^\d{6,16}$/,s:/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]+$/,"s6-18":/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]{6,18}$/,p:/^[0-9]{6}$/,m:/^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|17[0-9]{9}|18[0-9]{9}$/,e:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/},toString:Object.prototype.toString,isEmpty:function(e){return""===e||e===t.trim(this.attr("tip"))},getValue:function(e){var i,a=this;return e.is(":radio")?(i=a.find(":radio[name='"+e.attr("name")+"']:checked").val(),i=void 0===i?"":i):e.is(":checkbox")?(i="",a.find(":checkbox[name='"+e.attr("name")+"']:checked").each(function(){i+=t(this).val()+","}),i=void 0===i?"":i):i=e.val(),i=t.trim(i),d.util.isEmpty.call(e,i)?"":i},enhance:function(e,i,a,r){var s=this;s.find("[datatype]").each(function(){2==e?0==t(this).parent().next().find(".Validform_checktip").length&&(t(this).parent().next().append("<span class='Validform_checktip' />"),t(this).siblings(".Validform_checktip").remove()):3!=e&&4!=e||0==t(this).siblings(".Validform_checktip").length&&(t(this).parent().append("<span class='Validform_checktip' />"),t(this).parent().next().find(".Validform_checktip").remove())}),s.find("input[recheck]").each(function(){if("inited"==this.validform_inited)return!0;this.validform_inited="inited";var e=t(this),i=s.find("input[name='"+t(this).attr("recheck")+"']");i.bind("keyup",function(){if(i.val()==e.val()&&""!=i.val()){if(i.attr("tip")&&i.attr("tip")==i.val())return!1;e.trigger("blur")}}).bind("blur",function(){if(i.val()!=e.val()&&""!=e.val()){if(e.attr("tip")&&e.attr("tip")==e.val())return!1;e.trigger("blur")}})}),s.find("[tip]").each(function(){if("inited"==this.validform_inited)return!0;this.validform_inited="inited";var e=t(this).attr("tip"),i=t(this).attr("altercss");t(this).focus(function(){t(this).val()==e&&(t(this).val(""),i&&t(this).removeClass(i))}).blur(function(){""===t.trim(t(this).val())&&(t(this).val(e),i&&t(this).addClass(i))})}),s.find(":checkbox[datatype],:radio[datatype]").each(function(){if("inited"==this.validform_inited)return!0;this.validform_inited="inited";var e=t(this),i=e.attr("name");s.find("[name='"+i+"']").filter(":checkbox,:radio").bind("click",function(){setTimeout(function(){e.trigger("blur")},0)})}),s.find("select[datatype][multiple]").bind("click",function(){var e=t(this);setTimeout(function(){e.trigger("blur")},0)}),d.util.usePlugin.call(s,i,e,a,r)},usePlugin:function(e,i,a,r){var s=this,e=e||{};if(s.find("input[plugin='swfupload']").length&&"undefined"!=typeof swfuploadhandler){var n={custom_settings:{form:s,showmsg:function(t,e,r){d.util.showmsg.call(s,t,i,{obj:s.find("input[plugin='swfupload']"),type:e,sweep:a})}}};n=t.extend(!0,{},e.swfupload,n),s.find("input[plugin='swfupload']").each(function(e){if("inited"==this.validform_inited)return!0;this.validform_inited="inited",t(this).val(""),swfuploadhandler.init(n,e)})}if(s.find("input[plugin='datepicker']").length&&t.fn.datePicker&&(e.datepicker=e.datepicker||{},e.datepicker.format&&(Date.format=e.datepicker.format,delete e.datepicker.format),e.datepicker.firstDayOfWeek&&(Date.firstDayOfWeek=e.datepicker.firstDayOfWeek,delete e.datepicker.firstDayOfWeek),s.find("input[plugin='datepicker']").each(function(i){if("inited"==this.validform_inited)return!0;this.validform_inited="inited",e.datepicker.callback&&t(this).bind("dateSelected",function(){var i=new Date(t.event._dpCache[this._dpId].getSelected()[0]).asString(Date.format);e.datepicker.callback(i,this)}),t(this).datePicker(e.datepicker)})),s.find("input[plugin*='passwordStrength']").length&&t.fn.passwordStrength&&(e.passwordstrength=e.passwordstrength||{},e.passwordstrength.showmsg=function(t,e,r){d.util.showmsg.call(s,e,i,{obj:t,type:r,sweep:a})},s.find("input[plugin='passwordStrength']").each(function(i){if("inited"==this.validform_inited)return!0;this.validform_inited="inited",t(this).passwordStrength(e.passwordstrength)})),"addRule"!=r&&e.jqtransform&&t.fn.jqTransSelect){if("true"==s[0].jqTransSelected)return;s[0].jqTransSelected="true";var l=function(e){t(".jqTransformSelectWrapper ul:visible").each(function(){var i=t(this).parents(".jqTransformSelectWrapper:first").find("select").get(0);e&&i.oLabel&&i.oLabel.get(0)==e.get(0)||t(this).hide()})},o=function(e){0===t(e.target).parents(".jqTransformSelectWrapper").length&&l(t(e.target))};e.jqtransform.selector?(s.find(e.jqtransform.selector).filter('input:submit, input:reset, input[type="button"]').jqTransInputButton(),s.find(e.jqtransform.selector).filter("input:text, input:password").jqTransInputText(),s.find(e.jqtransform.selector).filter("input:checkbox").jqTransCheckBox(),s.find(e.jqtransform.selector).filter("input:radio").jqTransRadio(),s.find(e.jqtransform.selector).filter("textarea").jqTransTextarea(),s.find(e.jqtransform.selector).filter("select").length>0&&(s.find(e.jqtransform.selector).filter("select").jqTransSelect(),function(){t(document).mousedown(o)}())):s.jqTransform(),s.find(".jqTransformSelectWrapper").find("li a").click(function(){t(this).parents(".jqTransformSelectWrapper").find("select").trigger("blur")})}},getNullmsg:function(t){var e,i=this,a=/[\u4E00-\u9FA5\uf900-\ufa2da-zA-Z\s]+/g,r=t[0].settings.label||".Validform_label";if(r=i.siblings(r).eq(0).text()||i.siblings().find(r).eq(0).text()||i.parent().siblings(r).eq(0).text()||i.parent().siblings().find(r).eq(0).text(),r=r.replace(/\s(?![a-zA-Z])/g,"").match(a),r=r?r.join(""):[""],a=/\{(.+)\|(.+)\}/,e=t.data("tipmsg").s||o.s,""!=r){if(e=e.replace(/\{0\|(.+)\}/,r),i.attr("recheck"))return e=e.replace(/\{(.+)\}/,""),i.attr("nullmsg",e),e}else e=i.is(":checkbox,:radio,select")?e.replace(/\{0\|(.+)\}/,""):e.replace(/\{0\|(.+)\}/,"$1");return e=i.is(":checkbox,:radio,select")?e.replace(a,"$2"):e.replace(a,"$1"),i.attr("nullmsg",e),e},getErrormsg:function(e,i,a){var r,s=/^(.+?)((\d+)-(\d+))?$/,n=/^(.+?)(\d+)-(\d+)$/,l=/(.*?)\d+(.+?)\d+(.*)/,d=i.match(s);if("recheck"==a)return r=e.data("tipmsg").reck||o.reck;var c=t.extend({},o.w,e.data("tipmsg").w);if(d[0]in c)return e.data("tipmsg").w[d[0]]||o.w[d[0]];for(var u in c)if(-1!=u.indexOf(d[1])&&n.test(u))return r=(e.data("tipmsg").w[u]||o.w[u]).replace(l,"$1"+d[3]+"$2"+d[4]+"$3"),e.data("tipmsg").w[d[0]]=r,r;return e.data("tipmsg").def||o.def},_regcheck:function(t,e,i,a){var a=a,r=null,s=!1,n=/\/.+\//g,l=/^(.+?)(\d+)-(\d+)$/,c=3;if(n.test(t)){var u=t.match(n)[0].slice(1,-1),f=t.replace(n,"");s=RegExp(u,f).test(e)}else if("[object Function]"==d.util.toString.call(d.util.dataType[t]))s=d.util.dataType[t](e,i,a,d.util.dataType),!0===s||void 0===s?s=!0:(r=s,s=!1);else{if(!(t in d.util.dataType)){var p,m=t.match(l);if(m){for(var h in d.util.dataType)if((p=h.match(l))&&m[1]===p[1]){var g=d.util.dataType[h].toString(),f=g.match(/\/[mgi]*/g)[1].replace("/",""),v=new RegExp("\\{"+p[2]+","+p[3]+"\\}","g");g=g.replace(/\/[mgi]*/g,"/").replace(v,"{"+m[2]+","+m[3]+"}").replace(/^\//,"").replace(/\/$/,""),d.util.dataType[t]=new RegExp(g,f);break}}else s=!1,r=a.data("tipmsg").undef||o.undef}"[object RegExp]"==d.util.toString.call(d.util.dataType[t])&&(s=d.util.dataType[t].test(e))}if(s){if(c=2,r=i.attr("sucmsg")||a.data("tipmsg").r||o.r,i.attr("recheck")){var b=a.find("input[name='"+i.attr("recheck")+"']:first");e!=b.val()&&(s=!1,c=3,r=i.attr("errormsg")||d.util.getErrormsg.call(i,a,t,"recheck"))}}else r=r||i.attr("errormsg")||d.util.getErrormsg.call(i,a,t),d.util.isEmpty.call(i,e)&&(r=i.attr("nullmsg")||d.util.getNullmsg.call(i,a));return{passed:s,type:c,info:r}},regcheck:function(t,e,i){var a=this,r=null;if("ignore"===i.attr("ignore")&&d.util.isEmpty.call(i,e))return i.data("cked")&&(r=""),{passed:!0,type:4,info:r};i.data("cked","cked");for(var s,n=d.util.parseDatatype(t),l=0;l<n.length;l++){for(var o=0;o<n[l].length&&(s=d.util._regcheck(n[l][o],e,i,a),s.passed);o++);if(s.passed)break}return s},parseDatatype:function(t){var e=/\/.+?\/[mgi]*(?=(,|$|\||\s))|[\w\*-]+/g,i=t.match(e),a=t.replace(e,"").replace(/\s*/g,"").split(""),r=[],s=0;r[0]=[],r[0].push(i[0]);for(var n=0;n<a.length;n++)"|"==a[n]&&(s++,r[s]=[]),r[s].push(i[n+1]);return r},showmsg:function(e,i,r,s){if(void 0!=e&&("bycheck"!=s||!r.sweep||(!r.obj||r.obj.is(".Validform_error"))&&"function"!=typeof i)){if(t.extend(r,{curform:this}),"function"==typeof i)return void i(e,r,d.util.cssctl);(1==i||"byajax"==s&&4!=i)&&n.find(".Validform_info").html(e),(1==i&&"bycheck"!=s&&2!=r.type||"byajax"==s&&4!=i)&&(l=!1,n.find(".iframe").css("height",n.outerHeight()),n.show(),a(n,100)),2==i&&r.obj&&(r.obj.parent().next().find(".Validform_checktip").html(e),d.util.cssctl(r.obj.parent().next().find(".Validform_checktip"),r.type)),3!=i&&4!=i||!r.obj||(r.obj.siblings(".Validform_checktip").html(e),d.util.cssctl(r.obj.siblings(".Validform_checktip"),r.type))}},cssctl:function(t,e){switch(e){case 1:t.removeClass("Validform_right Validform_wrong").addClass("Validform_checktip Validform_loading");break;case 2:t.removeClass("Validform_wrong Validform_loading").addClass("Validform_checktip Validform_right");break;case 4:t.removeClass("Validform_right Validform_wrong Validform_loading").addClass("Validform_checktip");break;default:t.removeClass("Validform_right Validform_loading").addClass("Validform_checktip Validform_wrong")}},check:function(e,i,a){var r=e[0].settings,i=i||"",n=d.util.getValue.call(e,t(this));if(r.ignoreHidden&&t(this).is(":hidden")||"dataIgnore"===t(this).data("dataIgnore"))return!0;if(r.dragonfly&&!t(this).data("cked")&&d.util.isEmpty.call(t(this),n)&&"ignore"!=t(this).attr("ignore"))return!1;var l=d.util.regcheck.call(e,t(this).attr("datatype"),n,t(this));if(n==this.validform_lastval&&!t(this).attr("recheck")&&""==i)return!!l.passed;this.validform_lastval=n;var c;if(s=c=t(this),!l.passed)return d.util.abort.call(c[0]),a||(d.util.showmsg.call(e,l.info,r.tiptype,{obj:t(this),type:l.type,sweep:r.tipSweep},"bycheck"),!r.tipSweep&&c.addClass("Validform_error")),!1;var u=t(this).attr("ajaxurl");if(u&&!d.util.isEmpty.call(t(this),n)&&!a){var f=t(this);if(f[0].validform_subpost="postform"==i?"postform":"","posting"===f[0].validform_valid&&n==f[0].validform_ckvalue)return"ajax";f[0].validform_valid="posting",f[0].validform_ckvalue=n,d.util.showmsg.call(e,e.data("tipmsg").c||o.c,r.tiptype,{obj:f,type:1,sweep:r.tipSweep},"bycheck"),d.util.abort.call(c[0]);var p=t.extend(!0,{},r.ajaxurl||{}),m={type:"POST",cache:!1,url:u,data:"param="+encodeURIComponent(n)+"&name="+encodeURIComponent(t(this).attr("name")),success:function(i){"y"===t.trim(i.status)?(f[0].validform_valid="true",i.info&&f.attr("sucmsg",i.info),d.util.showmsg.call(e,f.attr("sucmsg")||e.data("tipmsg").r||o.r,r.tiptype,{obj:f,type:2,sweep:r.tipSweep},"bycheck"),c.removeClass("Validform_error"),s=null,"postform"==f[0].validform_subpost&&e.trigger("submit")):(f[0].validform_valid=i.info,d.util.showmsg.call(e,i.info,r.tiptype,{obj:f,type:3,sweep:r.tipSweep}),c.addClass("Validform_error")),c[0].validform_ajax=null},error:function(t){if("200"==t.status)return"y"==t.responseText?p.success({status:"y"}):p.success({status:"n",info:t.responseText}),!1;if("abort"!==t.statusText){var i="status: "+t.status+"; statusText: "+t.statusText;d.util.showmsg.call(e,i,r.tiptype,{obj:f,type:3,sweep:r.tipSweep}),c.addClass("Validform_error")}return f[0].validform_valid=t.statusText,c[0].validform_ajax=null,!0}};if(p.success){var h=p.success;p.success=function(t){m.success(t),h(t,f)}}if(p.error){var g=p.error;p.error=function(t){m.error(t)&&g(t,f)}}return p=t.extend({},m,p,{dataType:"json"}),c[0].validform_ajax=t.ajax(p),"ajax"}return u&&d.util.isEmpty.call(t(this),n)&&(d.util.abort.call(c[0]),c[0].validform_valid="true"),a||(d.util.showmsg.call(e,l.info,r.tiptype,{obj:t(this),type:l.type,sweep:r.tipSweep},"bycheck"),c.removeClass("Validform_error")),s=null,!0},submitForm:function(e,i,a,r,n){var l=this;if("posting"===l[0].validform_status)return!1;if(e.postonce&&"posted"===l[0].validform_status)return!1;if(!1===(e.beforeCheck&&e.beforeCheck(l)))return!1;var c,u=!0;if(l.find("[datatype]").each(function(){if(i)return!1;if(e.ignoreHidden&&t(this).is(":hidden")||"dataIgnore"===t(this).data("dataIgnore"))return!0;var a,r=d.util.getValue.call(l,t(this));if(s=a=t(this),c=d.util.regcheck.call(l,t(this).attr("datatype"),r,t(this)),!c.passed)return d.util.showmsg.call(l,c.info,e.tiptype,{obj:t(this),type:c.type,sweep:e.tipSweep}),a.addClass("Validform_error"),e.showAllError?(u&&(u=!1),!0):(a.focus(),u=!1,!1);if(t(this).attr("ajaxurl")&&!d.util.isEmpty.call(t(this),r)){if("true"!==this.validform_valid){var n=t(this);return d.util.showmsg.call(l,l.data("tipmsg").v||o.v,e.tiptype,{obj:n,type:3,sweep:e.tipSweep}),(a.addClass("Validform_error"),n.trigger("blur",["postform"]),e.showAllError)?(u&&(u=!1),!0):(u=!1,!1)}}else t(this).attr("ajaxurl")&&d.util.isEmpty.call(t(this),r)&&(d.util.abort.call(this),this.validform_valid="true");d.util.showmsg.call(l,c.info,e.tiptype,{obj:t(this),type:c.type,sweep:e.tipSweep}),a.removeClass("Validform_error"),s=null}),e.showAllError&&l.find(".Validform_error:first").focus(),u){if(!1===(e.beforeSubmit&&e.beforeSubmit(l)))return!1;if(l[0].validform_status="posting",!e.ajaxPost&&"ajaxPost"!==r){e.postonce||(l[0].validform_status="normal");var a=a||e.url;return a&&l.attr("action",a),e.callback&&e.callback(l)}var f=t.extend(!0,{},e.ajaxpost||{});if(f.url=a||f.url||e.url||l.attr("action"),d.util.showmsg.call(l,l.data("tipmsg").p||o.p,e.tiptype,{obj:l,type:1,sweep:e.tipSweep},"byajax"),n?f.async=!1:!1===n&&(f.async=!0),f.success){var p=f.success;f.success=function(i){e.callback&&e.callback(i),l[0].validform_ajax=null,"y"===t.trim(i.status)?l[0].validform_status="posted":l[0].validform_status="normal",p(i,l)}}if(f.error){var m=f.error;f.error=function(t){e.callback&&e.callback(t),l[0].validform_status="normal",l[0].validform_ajax=null,m(t,l)}}var h={type:"POST",async:!0,data:l.serializeArray(),success:function(i){"y"===t.trim(i.status)?(l[0].validform_status="posted",d.util.showmsg.call(l,i.info,e.tiptype,{obj:l,type:2,sweep:e.tipSweep},"byajax")):(l[0].validform_status="normal",d.util.showmsg.call(l,i.info,e.tiptype,{obj:l,type:3,sweep:e.tipSweep},"byajax")),e.callback&&e.callback(i),l[0].validform_ajax=null},error:function(t){var i="status: "+t.status+"; statusText: "+t.statusText;d.util.showmsg.call(l,i,e.tiptype,{obj:l,type:3,sweep:e.tipSweep},"byajax"),e.callback&&e.callback(t),l[0].validform_status="normal",l[0].validform_ajax=null}};f=t.extend({},h,f,{dataType:"json"}),l[0].validform_ajax=t.ajax(f)}return!1},resetForm:function(){var t=this;t.each(function(){this.reset&&this.reset(),this.validform_status="normal"}),t.find(".Validform_right").text(""),t.find(".passwordStrength").children().removeClass("bgStrength"),t.find(".Validform_checktip").removeClass("Validform_wrong Validform_right Validform_loading"),t.find(".Validform_error").removeClass("Validform_error"),t.find("[datatype]").removeData("cked").removeData("dataIgnore").each(function(){this.validform_lastval=null}),t.eq(0).find("input:first").focus()},abort:function(){this.validform_ajax&&this.validform_ajax.abort()}},t.Datatype=d.util.dataType,d.prototype={dataType:d.util.dataType,eq:function(e){var i=this;return e>=i.forms.length?null:(e in i.objects||(i.objects[e]=new d(t(i.forms[e]).get(),{},!0)),i.objects[e])},resetStatus:function(){return t(this.forms).each(function(){this.validform_status="normal"}),this},setStatus:function(e){return t(this.forms).each(function(){this.validform_status=e||"posting"}),this},getStatus:function(){return t(this.forms)[0].validform_status},ignore:function(e){var i=this,e=e||"[datatype]";return t(i.forms).find(e).each(function(){t(this).data("dataIgnore","dataIgnore").removeClass("Validform_error")}),this},unignore:function(e){var i=this,e=e||"[datatype]";return t(i.forms).find(e).each(function(){t(this).removeData("dataIgnore")}),this},addRule:function(e){for(var i=this,e=e||[],a=0;a<e.length;a++){var r=t(i.forms).find(e[a].ele);for(var s in e[a])"ele"!==s&&r.attr(s,e[a][s])}return t(i.forms).each(function(){var e=t(this);d.util.enhance.call(e,this.settings.tiptype,this.settings.usePlugin,this.settings.tipSweep,"addRule")}),this},ajaxPost:function(e,i,a){var s=this;return t(s.forms).each(function(){1!=this.settings.tiptype&&2!=this.settings.tiptype&&3!=this.settings.tiptype||r(),d.util.submitForm.call(t(s.forms[0]),this.settings,e,a,"ajaxPost",i)}),this},submitForm:function(e,i){return t(this.forms).each(function(){var a=d.util.submitForm.call(t(this),this.settings,e,i);void 0===a&&(a=!0),!0===a&&this.submit()}),this},resetForm:function(){var e=this;return d.util.resetForm.call(t(e.forms)),this},abort:function(){return t(this.forms).each(function(){d.util.abort.call(this)}),this},check:function(e,i){var i=i||"[datatype]",a=this,r=t(a.forms),s=!0;return r.find(i).each(function(){d.util.check.call(this,r,"",e)||(s=!1)}),s},config:function(e){var i=this;return e=e||{},t(i.forms).each(function(){var i=t(this);this.settings=t.extend(!0,this.settings,e),d.util.enhance.call(i,this.settings.tiptype,this.settings.usePlugin,this.settings.tipSweep)}),this}},t.fn.Validform=function(t){return new d(this,t)},t.Showmsg=function(t){r(),d.util.showmsg.call(e,t,1,{})},t.Hidemsg=function(){n.hide(),l=!0}}(jQuery,window);